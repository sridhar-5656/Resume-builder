(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[84151],{

/***/ 140912:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(710228);__web_req__(737454);self._fd1e22c0e0516062f8631db29060abc8 = self._fd1e22c0e0516062f8631db29060abc8 || {};(function(__c) {var iw;var cw;var Lu;var Ju;var Ku;var iu;var Iv;var Bu;var Jv;var bu;var Rt;var eu;var $v;var Wt;var fu;var Ut;var zt;var mu;var lu;var Vv;var Uv;var ju;var gu;var Qv;var ea=__c.ea;var cu;var Pt;var wv;var Av;var Cv;var yv;var zv;var Dv;var St;var Yt;var uv;var xv;var ov;var M=__c.M;var vv;var sv;var qv;var gv;var Eh=__c.Eh;var Xu;var Wu;var Vu;var Uu;var Tu;var Qu;var ra=__c.ra;var tu;var su;var ou;var Ot;var Nt;var $t;var au;var Zt;var Qt;var oa=__c.oa;var m=__c.m;var r=__c.r;var na=__c.na;
var At,Snb,Bt,Ct,Vnb,Xnb,Dt,Et,$nb,Ynb,Znb,bob,Ft,fob,gob,hob,Gt,iob,job,kob,lob,Ht,It,Jt,mob,nob,Kt,qob,Mt,uob,wob,xob,vob,zob,Aob,Bob,Cob,Dob,Eob,Xt,Sob,Wob,Xob,Yob,bpb,cpb,dpb,epb,fpb,hpb,ipb,kpb,lpb,mpb,pu,opb,qu,qpb,spb,tpb,wpb,xpb,wu,ypb,zpb,Apb,zu,Bpb,Cpb,Au,Epb,Fpb,Gpb,Hpb,Kpb,Lpb,Mu,Wpb,Nu,Ou,Ypb,Zpb,Pu,Ru,cqb,bqb,dqb,eqb,gqb,iqb,aqb,kqb,jqb,lqb,nqb,oqb,Yu,pqb,sqb,qqb,rqb,$u,vqb,av,uqb,wqb,xqb,yqb,tqb,zqb,Aqb,cv,Bqb,Cqb,Dqb,ev,Eqb,Fqb,Gqb,Hqb,Kqb,kv,jv,lv,mv,Lqb,Mqb,Nqb,Oqb,Pqb,nv,Qqb,Sqb,
pv,Tqb;zt=__c.zt=function(a,b){na(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};At=function(...a){return RegExp(a.map(b=>b.source).join("|"))};
Snb=function(a,b){na(0<b.length);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;1<b;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};Bt=function(a,b,c){na(a.Ah(b,c),"{} != {}",b,c)};Ct=function(a){return 1===a?Tnb:{type:0,length:a}};Vnb=function(a){return 1===a?Unb:{type:1,length:a}};
Xnb=function(a){return 1===a?Wnb:{type:2,length:a}};Dt=function(a,b){return{type:3,state:a,shift:b}};Et=function(a,b){return{type:4,delta:a,shift:b}};$nb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${Ynb(a.state)})${Znb(a.shift)}`;case 4:return`U(${Ynb(a.delta)})${Znb(a.shift)}`;default:throw new r(a);}};Ynb=function(a){return null!=a?a:"\u22a5"};Znb=function(a){return null!=a?`[${a.hg},${a.Qk}]`:""};
bob=function(a,b){return b&&a.GHa?new aob(a.ops.map(c=>3===c.type&&c.shift?Dt(c.state,{hg:c.shift.hg+b,Qk:c.shift.Qk+b}):4===c.type&&c.shift?Et(c.delta,{hg:c.shift.hg+b,Qk:c.shift.Qk+b}):c),a.pre,a.post,a.GHa):a};Ft=function(a,b){const c=m(a.Sk);if(0===c.type)return a.hB(0,1),cob;if(1===c.type)return a.hB(1,1),dob;if(2===c.type)return a.hB(2,1),eob;if(c.type!==b)throw Error();a.Sk=a.ops[a.i++];return c};fob=function(a){return a.every(()=>!1)};
gob=function(a,b){na(0<b.length);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};hob=function(a){na(a.Msa<a.input.length,"{} >= {}",a.Msa,a.input.length);return a.input[a.Msa++]};Gt=function(a,b){b=a.Msa+b;na(b<=a.input.length);const c=a.input.slice(a.Msa,b);a.Msa=b;return c};iob=function(a,b){a.hab||(a.hab=new Set);na(!a.hab.has(b),"duplicate modification: {}",b);a.hab.add(b)};job=function(a,b,c){iob(a,b);(a.rjc||(a.rjc=new Map)).set(b,c)};
kob=function(a,b,c){iob(a,b);(a.qjc||(a.qjc=new Map)).set(b,c)};lob=function(a,b){let {hg:c,Qk:d}=b;var e=a.rjc;a=a.qjc;if(e){const f=e.get(c);null!=f&&(c=f,e.delete(c))}a&&(e=a.get(d),null!=e&&(d=e,a.delete(d)));return c!==b.hg||d!==b.Qk?{hg:c,Qk:d}:b};Ht=function(a,b,c){iob(a,b);null!=c&&(a.AYa||(a.AYa=new Map)).set(b,c)};It=function(a,b,c){(a.cJa||(a.cJa=new Map)).set(b,c)};Jt=function(a,b,c){(a.uIa||(a.uIa=new Map)).set(c,b)};mob=function({hg:a,Qk:b}){return{hg:b,Qk:a}};
nob=function(a,b){return a?!!b&&a.hg===b.hg&&a.Qk===b.Qk:!b};__c.oob=function(a){return a.filter(()=>!0)};Kt=function(a,b){na(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};qob=function(a,b){return a===Lt?b:b===Lt?a:new pob(a,b)};Mt=function(a,b){return b===Lt?Lt:new a(b)};uob=function(a){a:{a={items:Mt(rob,a),Yi:Lt};for(b in a)if(a[b]!==Lt){var b=new sob(a);break a}b=Lt}return qob(tob,b)};
wob=function(a,b){oa(null!=a.DI,"mutable not connected");try{a.PW(b)}catch(c){throw a.error(c),c;}vob(a,b)};xob=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};vob=function(a,b){oa(null!=a.DI);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Nt=__c.Nt=function(a,b){a.I2b||(a.I2b={next:c=>{a.DI&&(vob(a,c),a.DI.next(c))},error:c=>{a.error(c)}});return new yob(a.I2b,b)};Ot=__c.Ot=function(a,b,c){b=a.Jx(b);a=a.connect(b,c);return{mutable:b,Lv:a}};Pt=__c.Pt=function(a,b,c,d){a.destroy(d,b);c.complete()};zob=function(a,b){let c=a.rows[b];null==c&&(c=a.rows[b]=a.N0c++);return c};Aob=function(a,b){let c=a.cols[b];null==c&&(c=a.cols[b]=a.L0c++);return c};
Bob=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};Cob=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};Dob=function(a,b){na(a.CM(b),"invalid value: {}",b);return b};
Eob=function(a,b,c){if(!a.rw(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Qt=__c.Qt=function(a){return new Fob(a)};Rt=__c.Rt=function(...a){return 1===a.length?new Gob(a[0]):new Hob(new Set(a))};St=__c.St=function(a,b){return new Iob(a,b,Mt(rob,a.serializer))};__c.Tt=function(a,b){return new Job(a,b,Mt(Kob,b.serializer))};Ut=__c.Ut=function(a,b){return new Lob(a,b)};__c.Vt=function(a,b){return new Mob(a,b)};Wt=__c.Wt=function(a){return new Nob(a)};
Xt=function(a,b){na(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Qt(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Yt=__c.Yt=function(a,b){na(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Qt(c=>Number.isFinite(c)&&a<=c&&c<=b)};$t=__c.$t=function(a){return a instanceof Zt?new Oob(a,Mt(Pob,a.serializer)):new Qob(a,Mt(Pob,a.SXb),Mt(Pob,a.Yna))};Sob=function(a){return new Rob(a)};au=__c.au=function(a){return new Tob(a,a.serializer)};bu=__c.bu=function(a){return new Uob(a,a.Yna)};
cu=__c.cu=function(a){return au($t(a))};Wob=function(a,b,c){return null==c||a.component.isIdentity(c)?Vob:new Map([[b,c]])};Xob=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Yob=function(a,b,c){const d=Nt(a,g=>a.domain.update(b,g)),{mutable:e,Lv:f}=Ot(a.type,c,d);return{iGc:{to:f,from:d},value:e}};__c.du=function(...a){[,a]=1===a.length?[void 0,a[0]]:a;return new Zob(a,Mt(Kob,a.Yna))};eu=__c.eu=function(a){return new $ob(a,a.serializer)};
bpb=function(a,b,c){return apb.of({...a,...b,...c})};cpb=function(...a){const b=new Set;for(const c of a)for(const d in c)na(!b.has(d),'duplicate key: "{}"',d),b.add(d)};dpb=function(a,b){return Nt(a,c=>({[b]:c}))};epb=function(a,b){return Nt(a,c=>({[b]:c}))};
fpb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Sb:{...a.Sb,...b.Sb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Sb:f,attributes:g}=c(e),{Sb:h,attributes:k}=d({...e,...f,...g});return{Sb:{...f,...h},attributes:{...g,...k}}}}};fu=__c.fu=function(a){return gpb.Sj(a)};gu=__c.gu=function(a){return a.domain.Jf()};iu=__c.iu=function(a){return new __c.hu(a,uob(a.Yna))};ju=__c.ju=function(){throw Error("list not modifiable");};
__c.ku=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};hpb=function(a,b){a=a.length;na(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};ipb=function(a,b){a=a.length;na(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.jpb=function(a,b){return a?b?{Ya:__c.ku(a.Ya,b.Ya),item:__c.ku(a.item,b.item),Yi:__c.ku(a.Yi,b.Yi)}:a:b};kpb=function(a,b){a=a.Z8;na(0<b&&b<a,"{} \u2209 (0, {})",0,a)};lpb=function(a,b){a=a.jZ;na(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
lu=__c.lu=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.BU(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.tYa(c.state);case 2:return a.ena(b.state);default:throw new r(c);}default:throw new r(b);}};mu=__c.mu=function(a){const b=m(a.Sk);a.Sk=a.ops[a.i++];return b};__c.nu=function(a,b){const c=m(a.Sk),d=c.Z8;na(0<b&&b<=d);if(b<d){const [e,f]=c.hHb(b);a.Sk=f;return e}a.Sk=a.ops[a.i++];return c};
mpb=function(a,b){const c=m(a.Sk),d=c.jZ;na(0<b&&b<=d);if(b<d){const [e,f]=c.gHb(b);a.Sk=f;return e}a.Sk=a.ops[a.i++];return c};pu=function(a,b,c){switch(c.type){case 0:return b;case 1:return na(1===b.type),new ou(a.component.apply(b.state,c.delta));case 3:return __c.npb(a,b,c.oldState),c.newState;default:throw new r(c);}};
opb=function(a,b,c){switch(c.type){case 0:return b;case 1:return na(1===b.type),new ou(a.component.Nj(b.state,c.delta));case 3:return __c.npb(a,b,c.newState),c.oldState;default:throw new r(c);}};qu=function(a,b,c){switch(b.type){case 0:return 0===c.type&&b.state===c.state;case 1:return 1===c.type&&a.component.Ah(b.state,c.state);case 2:return 2===c.type&&b.state===c.state;default:throw new r(b);}};__c.npb=function(a,b,c){na(qu(a,b,c),"{} != {}",b,c)};
__c.ppb=function(a,b){const c=__c.ru.Jf(),d=a.cursor(0,{...su,Yi:g=>c.retain(g)}),e={...su,Ya:g=>c.retain(g.length)},f={...su,Ya:g=>c.BU(g)};b.forEach({retain:g=>d.lm(g,e),delete:g=>d.lm(g,f),insert:g=>c.insert(g)});return c.build()};
qpb=function(a,b){const c=new tu,d=a.cursor();a=h=>{throw Error(String(h));};const e={...su,Ya:h=>c.retain(h.length)},f={...su,Ya:a},g={...su,Ya:()=>0,Yi:a};b.forEach({retain:h=>d.iP(h,e),update:h=>{throw new r(h);},insert:h=>2!==h.type&&c.insert(h.state),change:(h,k)=>{2===h.type?(d.iP(h.length,f),2!==k.type&&c.insert(k.state)):(d.iP(h.length,g),2===k.type?c.delete(h.length):(na(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.uu=function(a){return Object.keys(a)};
__c.vu=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.rpb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};spb=function(a,b){return{type:0,ID:a,cF:b}};tpb=function(a){return{type:1,length:a}};__c.upb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.vpb=function(a,b){Object.entries(a).forEach(([c,d])=>null!=d&&b(d,c))};
wpb=function(a,b){const c=__c.uu(a),d=__c.uu(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.rpb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.upb(a[f].r,b[f].r))};xpb=function(a,b={}){return{type:0,length:a,changes:b}};wu=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
ypb=function(a,b){let c=0,d=0;for(const e of a.mba)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};zpb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new xu(d,e):a};Apb=function(a,b,c){for(const [d,e]of a){const f=zpb(e,b,c);f!==e&&a.set(d,f)}};
zu=function(a,b,c,d){for(const [e,f]of a){const g=f.a9,h=f.X8,k=g&&(null!=b?zpb(g,b,d):g),l=h&&(null!=c?zpb(h,c,d):h);k===g&&l===h||a.set(e,new yu(k,l))}};Bpb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Cpb=function(a,b){ra(a,b);return a};Au=function(a,b){return{key:a.lOa(b),value:b}};Bu=__c.Bu=function(a,b,c){return new Dpb(a,b,c)};Epb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
Fpb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};Gpb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};Hpb=function(a){return new RegExp(a+"B[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}")};
__c.Ipb=function(a){var b=a.options;const c=a.Ar;b=c&&b.find(e=>(null===e||void 0===e?void 0:e.id)===c)||b.find(e=>e);var d;return{...a,text:null!==(d=null===b||void 0===b?void 0:b.label)&&void 0!==d?d:""}};__c.Jpb=function({text:a,...b}){ra(a,__c.Ipb(b).text,"Value to unmap is not a derived select pill state");return b};__c.Cu=function(a){ra(a.normalize(a.defaultValue),a.defaultValue)};__c.Du=function(a,b){return null!=b?a.decode(b):void 0};__c.Eu=function(a,b){return null!=b?a.encode(b):void 0};
Kpb=function(a){a=a.split("/");return 2===a.length?a[0]:void 0};Lpb=function(a){if(a.startsWith(`${__c.Fu}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.Gu=function(a,b){if(b=Lpb(b)){const [c,d]=b;if(a.WVc(c))return[c,d]}};__c.Hu=function(a,b,c,d){c=a.Nka(c);for(const e of Object.keys(b))a.BB(e)&&c(e)&&d(b[e],e)};__c.Mpb=function(a,b,c){const d={};a.copy(b,c,d);return d};__c.Npb=function(a,b,c){return a.attributes[c].VVc?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};
__c.Opb=function(a,b,c){const d={};__c.Hu(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.Iu=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{na(a.BB(d)),c[d]=null!=e?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.Qpb=function(a){return new Ppb("block",a)};Ju=__c.Ju=function(a,b){return new Rpb(a,b)};Ku=__c.Ku=function(a,b,c){return new Spb(a,b,c)};Lu=__c.Lu=function(a,b){return new Tpb(a,b,b[0])};
__c.Vpb=function(a){const b=(d,e)=>{if("string"===typeof e)return d[e]?d[e]:(d=Kpb(e))&&a.vOa[d]?a.vOa[d]:(e=Lpb(e))&&a.Ys[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>null!=b(d,e),ownKeys:d=>Object.keys(d)});return new __c.Upb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.vOa)),new Set(Object.keys(a.Ys)))};Mu=function(a){return{type:0,length:a}};Wpb=function(a){return{type:1,length:a}};Nu=function(a,b){return a.hB(1,b).length};
Ou=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Xpb;na(0<=c[0]);b=new Map;a=a.Lc(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){oa(null!=c);switch(c.type){case 0:c=a.Gx(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=Nu(a,c.length);break;default:throw new r(c);}c=a.head}c&&1===c.type&&(e+=Nu(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
Ypb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Xpb;na(0<=c[0]);b=new Map;a=a.Lc(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){oa(null!=c);switch(c.type){case 0:c=a.Gx(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=Nu(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};Zpb=function(a){return JSON.stringify(a,(b,c)=>null!=c?c:null)};Pu=function(a){return new $pb(a.sgd)};
Ru=function(a,b,c,d){var e=Math.max(a.Zo,b.Zo),f=Math.max(a.Ky,b.Ky);a=a.Lc(void 0,e,f);b=b.Lc(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&0===e.type||f&&0===f.type){f=a.Ow();const k=b.Ow(),l=c.Ow();e=d;for(var g=f.head,h=k.head;g||h;){if(g&&0===g.type||h&&0===h.type){g=f.ut();h=k.ut();for(const n of aqb(g,h))l.Pl(n,e(n,f.attrs[n],k.attrs[n]))}else if(g&&h)g=Math.min(g.length,h.length),f.Fm(g),k.Fm(g),l.pC(g);else throw Error(`length mismatch: ${g} x ${h}`);g=f.head;h=k.head}f.finish();k.finish();
l.finish()}else if(e&&f)e=Math.min(e.length,f.length),Qu(a,e),Qu(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};cqb=function(a,b,c,d){return Su.isIdentity(c)&&Su.isIdentity(d)||b.items.isEmpty()?b:bqb("apply",a.sgd,b,c,d)};
bqb=function(a,b,c,d,e){const f=new Tu,[g,h]="apply"===a?[c.items.Lc(e.pre),e.Lc(c.items.length,0)]:[c.items.Lc(e.post),e.Lc(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&1===k.type)Nu(h,k.length),"apply"===a?f.rc(k.length):g.Fm(k.length);else if(e&&0===e.type){e=g.ut();const [n,p]="apply"===a?[e.Lc(d.pre),d.Lc(e.length,0)]:[e.Lc(d.post),d.Lc(0,e.length)];e=a;k=new Tu;var l=n.head;let q=p.head;for(;l||q;){if(q&&1===q.type)Nu(p,q.length),"apply"===e?k.rc(q.length):n.Fm(q.length);else if(l)0===
l.type?k.grad(n.ut()):q?(l=Math.min(l.length,q.length),n.Fm(l),p.Gx(l),k.rc(l)):(n.Fm(l.length),k.rc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Fm(e),h.Gx(e),f.rc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Uu.of(b,a,c,a.length)};dqb=function(a){return{type:1,length:a}};
Qu=__c.Qu=function(a,b){oa(null==a.AT);return a.uOa.Fm(b)};eqb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.Pb,d.Pb)&&a(b,c.r,d.r):!1};__c.fqb=function(a,b,c,d){if(!d)return c;na(a(b,c,d.Pb),"{} != {}",c,d.Pb);return d.r};gqb=function(a,b,c,d){return eqb(a,b,c,d)?void 0:{t:c,b:d}};
__c.hqb=function(a,b,c){const d={};if(b&&c)for(const f of aqb(b,c)){var e=gqb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Vu(b))(c=gqb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Vu(c))(b=gqb(a,f,void 0,c[f]))&&(d[f]=b);return Wu(d)?void 0:d};iqb=function(a,b,c){return aqb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?eqb(a,d,e.t,f.t)&&eqb(a,d,e.b,f.b):!1})};Vu=__c.Vu=function(a){return Object.keys(a)};
aqb=function(a,b){return a&&b?[...(new Set([...Vu(a),...Vu(b)]))]:a?Vu(a):b?Vu(b):[]};Wu=__c.Wu=function(a){return 0===Vu(a).length};kqb=function(a,b){b.forEach(a.nh.BB,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};jqb(e,(h,k)=>{null!=h&&(oa(a.nh.txa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};jqb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};lqb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};
Xu=__c.Xu=function(a,b,c,d){oa(0<=a);oa(0<=b);oa(a<=c);oa(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.mqb=function(a,b){return{span:a,state:b}};nqb=function(a){const b=a.rows[a.y];if(null!=b)for(;null==b.cells[a.x]&&a.x<b.cells.length;)a.x++};oqb=function(a){for(;null==a.rows[a.y]&&a.y<a.rows.length;)a.y++};Yu=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
pqb=function(a,b,c,d){if(Su.isIdentity(c)&&Su.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=Ou(c,e),h=Ou(d,f),k=new Zu;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
sqb=function(a,b,c){const d=new Zu;qqb(b.Lc(),c.Lc(),(e,f,g,h)=>{null==b&&null==c||d.add(e,f,rqb(a,g,h))});return d.build()};qqb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=null==d?1:null==e?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(0>d){const {x:f,y:g,value:h}=a.Sy();c(f,g,h,void 0)}else if(0<d){const {x:f,y:g,value:h}=b.Sy();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.Sy();({value:d}=b.Sy());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
rqb=function(a,b,c){if(null==b)return c;if(null==c)return b;switch(b.type){case 0:a:switch(c.type){case 1:oa(null!=b.n);c.bounds&&oa(Yu(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:oa($u(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&oa(Yu(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:oa(null!=c.o);b.bounds&&oa(Yu(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Nj(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};$u=function(a,b,c){return b===c?!0:b&&c?Yu(b,c)&&a.component.Ah(b.state,c.state):!1};
vqb=function(a,b,c,d,e,f){const g=0===d.type?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)tqb(f,2*n),f.Ow(),f.IVb((p,q)=>{e.append(Xu(p,q,p,q))}),f.W5a();f.yi<=h&&tqb(f,2*(h+1));if(null==g)return{X1a:b}=uqb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {X1a:k,iEb:l}=uqb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);oa(0===d.type);return a.replace(d.n,void 0)}};
av=function(a,b){wqb(a,b.left,b.top);a.append(b)};uqb=function(a,b){wqb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{X1a:!0,iEb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{X1a:!0,iEb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{X1a:!0,iEb:{right:c,bottom:d}};d=e}return{X1a:!1,iEb:void 0}};
wqb=function(a,b,c){c>a.Yoa&&(a.buffer.splice(0,c-a.Yoa),a.Yoa=c,a.EKa=0);b>a.EKa&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.EKa),a.EKa=b)};xqb=function(a,b,c){c-=a.Yoa;a=0===c?b-a.EKa:b;oa(0<=c&&0<=a);return{Rkd:a,Ukd:c}};yqb=function(a){const b=Su.Jf();a=a.Lc();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(2*c.length);a.Gx(c.length);break;case 1:b.expand(2*c.length);Nu(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
tqb=function(a,b){for(oa(b>=a.aha);b>a.aha;){var c=a.Lc.head;oa(null!=c);0===c.type?(a.Ow(),a.W5a()):(c=Math.min(c.length,b-a.aha),Qu(a.Lc,c),a.aha+=c)}};zqb=function(a,b){const c=new Zu,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);null==g||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.Xb(g.value)},void 0)))}return a.domain.Hd({cells:c.build()})};
Aqb=function(a,b){return c=>{const {left:d,top:e}=b.R3c.get();return a.domain.Hd({cells:(new Zu).add(d,e,a.domain.update(void 0,c)).build()})}};cv=function(a,b,c,d){a.Ok.set(b,new bv(c,d));return a};Bqb=function(a,b,c,d){a.Ok.set(b,new dv(c,d));return a};Cqb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
Dqb=function(a,b){if(Su.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:null!=e.oldValue&&c.add(e.oldValue);null!=e.newValue&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=Ou(b,c);return Eh(a,e=>{switch(e.type){case 0:return new bv(null!=e.oldValue?m(d.get(e.oldValue)):void 0,null!=e.newValue?m(d.get(e.newValue)):void 0);case 1:return new dv(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};ev=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};Eqb=function(a){oa(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};Fqb=function(a){const b=new Map;for(const [c,d]of a)a=ev(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};Gqb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=Eqb(c),e=ev(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,fv.from({start:f,end:g}))}if(a.size)throw Error();return b};
Hqb=function(a){const b=gv.Jf();for(const [d,e]of a.Je)switch(e.type){case "replace":var c=ev(d);cv(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);cv(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=ev(d);e.start&&Bqb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&Bqb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return gv.Hd(a.axis,b.build().Ok)};
Kqb=function(a){const b=new Map,c=new Map(a.Ok);for(const [f,g]of c){const h=Eqb(f),k=ev(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));oa(d.type===g.type);oa(e.type===g.type);oa(null!=d.oldValue===(null!=e.oldValue));oa(null!=d.newValue===(null!=e.newValue));c.delete(k.start);c.delete(k.end);b.set(h,new Iqb(null!=d.oldValue&&null!=e.oldValue?fv.from([d.oldValue,e.oldValue]):void 0,null!=d.newValue&&null!=e.newValue?fv.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&oa(d.type===g.type);e&&oa(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new Jqb(d?hv.from(d):void 0,e?hv.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return iv.create(a.axis,b)};kv=function(a,b,c){const {x:d,y:e,...f}=a;na(Su.nj(d,jv(b)));na(Su.nj(e,jv(c)));return f};
jv=function(a){const b=Su.Jf();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};lv=function(a,b){let c=a.items[b];null==c&&(c=a.items[b]={});return c};mv=function(a,b){if(null!=b)return m(a.mWc.get(b))};Lqb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.cRa(d));d++);return c};
Mqb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.bRa(d));d++);return c};Nqb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.cRa(d));d--);return c};Oqb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.bRa(d));d--);return c};Pqb=function(a,b){const c=a.K0(b.ih),d=a.P3(b.Hh),e=a.K0(b.Wk||b.ih);a=a.P3(b.Ql||b.Hh);na(null!=c&&null!=d&&null!=e&&null!=a);na(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};nv=__webpack_require__(42782);Qqb=nv.SW;__c.Rqb=nv.p6;ov=__c.ov=nv.Fl;
Sqb=nv.cp;pv=nv.LO;Tqb=nv.vP;var Uqb,Wqb;Uqb=__webpack_require__(649799);__c.Vqb=Uqb.Om;Wqb=Uqb.kq;__c.Xqb=__webpack_require__(223897).h;__c.Yqb=__webpack_require__(17986).xQ;__c.Zqb=__webpack_require__(858800).U;__c.$qb=__webpack_require__(127414).C;var brb,drb,frb,rv;__c.arb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;qv=__c.qv=/^#[0-9a-f]{6}$/;brb=At(/^transparent$/,qv);__c.crb=/^[0-9]+(\.[0-9]+)?$/;drb=/^[0-9]+(\.[0-9]+)?px$/;__c.erb=/^-?[0-9]+(\.[0-9]+)?%$/;frb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$/;rv=/^inherit$/;var grb;sv=__c.sv=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new grb(this,a,b,c,d)}};
grb=class extends sv{isIdentity(a){return this.component.isIdentity(this.L_(a))}compose(a,b){return this.Nta(this.component.compose(this.L_(a),this.L_(b)))}transform(a,b){const [c,d]=this.component.transform(this.L_(a),this.L_(b));return[this.Nta(c),this.Nta(d)]}Zj(a){return this.Nta(this.component.Zj(this.L_(a)))}nj(a,b){return a===b||this.component.nj(this.L_(a),this.L_(b))}identity(a){return this.Nta(this.component.identity(this.cga(a)))}apply(a,b){const c=this.cga(a);b=this.component.apply(c,
this.L_(b));return c===b?a:this.A$a(b)}Nj(a,b){const c=this.cga(a);b=this.component.Nj(c,this.L_(b));return c===b?a:this.A$a(b)}Ah(a,b){return a===b||this.component.Ah(this.cga(a),this.cga(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.Nta=b;this.L_=c;this.A$a=d;this.cga=e}};var hrb=class extends sv{isIdentity(){return!0}compose(){}transform(){return[void 0,void 0]}Zj(){}nj(){return!0}identity(){}apply(a){return a}Nj(a){return a}Ah(a,b){return this.rw(a,b)}equals(a){return this===a}constructor(a){super();this.rw=a}};var Rob=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},irb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},tv=class extends sv{update(a){return this.component.isIdentity(a)?void 0:new Rob(a)}replace(a,b){return new irb(a,b)}isIdentity(a){return null==a||0===a.type&&this.component.isIdentity(a.delta)}compose(a,b){if(null==a)return b;if(null==b)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Nj(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return Bt(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(null==a||null==b)return[b,a];switch(a.type){case 0:switch(b.type){case 0:const [c,d]=this.component.transform(a.delta,b.delta);return[this.update(c),
this.update(d)];case 1:return[this.replace(this.component.apply(b.oldState,a.delta),b.newState),void 0];default:throw new r(b);}case 1:switch(b.type){case 0:return[void 0,this.replace(this.component.apply(a.oldState,b.delta),a.newState)];case 1:return Bt(this.component,a.oldState,b.oldState),[void 0,this.replace(b.newState,a.newState)];default:throw new r(b);}default:throw new r(a);}}Zj(a){if(null==a)return a;switch(a.type){case 0:return this.update(this.component.Zj(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}nj(a,b){return a===b?!0:null==a||null==b?a===b:0===a.type&&0===b.type?this.component.nj(a.delta,b.delta):1===a.type&&1===b.type?this.component.Ah(a.oldState,b.oldState)&&this.component.Ah(a.newState,b.newState):!1}identity(){}apply(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return Bt(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Nj(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.Nj(a,
b.delta);case 1:return Bt(this.component,a,b.newState),b.oldState;default:throw new r(b);}}Ah(a,b){return this.component.Ah(a,b)}equals(a){return this===a||a instanceof tv&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var jrb=class extends sv{isIdentity(a){return null==a||this.component.isIdentity(a)}compose(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.compose(a,b):void 0}transform(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.transform(a,b):[void 0,void 0]}Zj(a){return null!=a?this.component.Zj(a):void 0}nj(a,b){return null!=a&&null!=b&&this.component.nj(a,b)||null==a&&null==b}identity(a){return null!=a?this.component.identity(a):void 0}apply(a,b){na(null==a===(null==
b));return null!=a&&null!=b?this.component.apply(a,b):void 0}Nj(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.Nj(a,b):void 0}Ah(a,b){return null!=a&&null!=b&&this.component.Ah(a,b)||null==a&&null==b}equals(a){return this===a||a instanceof jrb&&this.component.equals(a.component)}constructor(a){super();this.component=a;na(!(a instanceof jrb))}};var Tnb={type:0,length:1},Unb={type:1,length:1},Wnb={type:2,length:1},dob=Dt(),cob=Et(),eob=Et(new irb),aob=class{toString(){return this.ops.map($nb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.GHa=d}},krb=new aob([],0,0,0),lrb=class{v4(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Ct(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Vnb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(Xnb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){na(0<=b,"{} < 0",b);b&&(this.v4(a),this.acc+=b);return this}VDb({hg:a,Qk:b}){const c=this.ops.length,d=this.NZ||(this.NZ=new Map),e=this.Fva||(this.Fva=new Map);na(!d.has(a),"duplicate record: {}",a);na(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.ena(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.hg===c.Qk&&(c=void 0,a=Dt(b)),null==b&&null==c))return this.expand();this.v4(a.type);c&&this.VDb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.hg===c.Qk&&(c=void 0,a=Et(b)),null==b){if(null==c)return this.retain()}else if(1===b.type&&null==b.oldState&&null==b.newState&&null==c)return this.ena();this.v4(a.type);c&&this.VDb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return null==
a||"number"===typeof a?this.accumulate(0,a):this.append(Et(void 0,a))}expand(a){return null==a||"number"===typeof a?this.accumulate(1,a):this.append(Dt(void 0,a))}ena(a){return null==a||"number"===typeof a?this.accumulate(2,a):this.append(Et(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(Dt(a,b))}update(a,b){return this.append(Et(null!=a?this.component.update(a):void 0,b))}tYa(a){return this.append(Et(this.component.replace(void 0,a)))}BU(a){return this.append(Et(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(Et(this.component.replace(a,b),c))}build(a){0!==this.mode&&this.v4();if(a&&a.Rtc())return a.P1b(this.ops);if(!this.NZ&&!this.Fva)return new aob(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.NZ);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.hg),f=g.get(d.Qk);if(e!==d.hg||f!==d.Qk)a[h]=Dt(c.state,{hg:e,Qk:f});break;case 4:d=
c.shift;e=g.get(d.hg);f=g.get(d.Qk);if(e!==d.hg||f!==d.Qk)a[h]=Et(c.delta,{hg:e,Qk:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${$nb(c)}`);default:throw new r(c);}}return new aob(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.Fva=this.NZ=this.mode=void 0}},mrb=class{static create(a,b,c){na(0<=b,"{} < 0",b);na(0<=c,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,Ct(b)]:a.ops;return new mrb(a)}get head(){return this.Sk}hB(a,
b=1){const c=m(this.Sk);if(c.type!==a)throw Error();const d=c.length;na(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Sk=Ct(d-b),Ct(b);case 1:return this.Sk=Vnb(d-b),Vnb(b);case 2:return this.Sk=Xnb(d-b),Xnb(b);default:throw new r(a);}else return this.Sk=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Sk=a[this.i++]}},nrb=class{VDb(a,{hg:b,Qk:c}){const d=this.NZ||(this.NZ=new Map),e=this.Fva||(this.Fva=new Map);oa(!d.has(b),"already recorded: {}",b);oa(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.VDb(a,b):null!=a&&(this.list[this.length]=a);this.length++;return this}expand(a=1){na(0<=a,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.NZ||this.Fva){const c=m(this.NZ);var b=m(this.Fva);ra(c.size,b.size);for(const [d,e]of b)oa(c.has(d),"recall has no record: {}",d),b=c.get(d),null!=b&&(a[e]=b)}null!=this.RMc&&ra(this.length,this.RMc);return a}constructor(a){this.RMc=a;this.list=[];this.length=
0;this.Fva=this.NZ=void 0}},orb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new orb(a)}finish(){ra(this.Msa,this.input.length)}constructor(a){this.input=a;this.Msa=0}},prb=class{Rtc(){return!!this.hab}P1b(a){const b=new lrb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.$Nc(c));break;case 4:b.append(this.aOc(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.qjc=this.rjc=this.hab=
void 0}},qrb=class extends prb{$Nc(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.AYa&&this.AYa.get(c.hg);d=this.component.apply(b,d);const e=lob(this,c);return d!==b||e!==c?Dt(d,e):a}aOc(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.AYa&&this.AYa.get(c.hg);d=this.component.compose(b,d);const e=lob(this,c);return d!==b||e!==c?Et(d,e):a}constructor(...a){super(...a);this.AYa=void 0}},rrb=class extends prb{Rtc(){return super.Rtc()||!!this.uIa||!!this.cJa}$Nc(a){if(!a.shift)return a;
const b=a.shift,c=lob(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}aOc(a){const b=a.delta,c=a.shift;var d=this.uIa;if(d){var e=d.get(a);if(null==e)e=a.delta;else{d.delete(a);d=m(this.cJa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&lob(this,c);return e!==b||d!==c?Et(e,d):a}P1b(a){a=super.P1b(a);if(this.uIa&&this.uIa.size)throw Error(`unconsumed setSurrogates: ${[...this.uIa.values()]}`);if(this.cJa&&this.cJa.size)throw Error(`unconsumed subSurrogates: ${[...this.cJa.keys()]}`);
return a}constructor(...a){super(...a);this.cJa=this.uIa=void 0}},srb=class extends sv{Jf(){return new lrb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Jf(),e=new qrb(c),f=mrb.create(a,0,b.pre),g=mrb.create(bob(b,a.GHa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(1===k.type)d.append(g.hB(k.type,k.length));else if(3===k.type)d.append(Ft(g,k.type));else if(h)if(1===h.type)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.hB(h.type,l);g.hB(k.type,l);d.append(Vnb(l));break;case 4:l=Ft(f,h.type);k=Ft(g,k.type);h=k.shift;d.append(Dt(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(3===h.type){l=Ft(f,h.type);k=Ft(g,k.type);h=l.shift;var n=k.shift;null==h?d.append(Dt(c.apply(l.state,k.delta),n)):null==n?(d.append(l),
Ht(e,h.Qk,k.delta)):(d.append(Dt(l.state,{hg:h.hg,Qk:n.Qk})),Ht(e,h.Qk,k.delta),kob(e,n.hg,h.Qk))}else 4===h.type||4===k.type?(k=Ft(f,4),l=Ft(g,4),h=k.shift,n=l.shift,null==h?d.append(Et(c.compose(k.delta,l.delta),n)):null==n?(d.append(k),Ht(e,h.Qk,l.delta)):(d.append(Et(k.delta,{hg:h.hg,Qk:n.Qk})),Ht(e,h.Qk,l.delta),kob(e,n.hg,h.Qk))):(l=Math.min(h.length,k.length),h=f.hB(h.type,l),k=g.hB(k.type,l),d.append(2===h.type||2===k.type?Xnb(l):Ct(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.component,d=mrb.create(a,b.pre,0),e=mrb.create(bob(b,a.GHa),a.pre,0),f=this.Jf(),g=this.Jf(),h=new rrb(c),k=new rrb(c);for(var l=d.head,n=e.head;l||n;){if(l&&3===l.type)if(n=Ft(d,l.type),n.shift){var p=n.shift;l=Et();g.append(l,"nocollapse");f.append(n);Jt(h,p.Qk,l);It(h,p.hg)}else g.append(Tnb),f.append(n);else if(l&&1===l.type)n=d.hB(l.type,l.length),g.append(Ct(n.length)),f.append(n);else if(n&&
3===n.type)if(n=Ft(e,n.type),n.shift){l=n.shift;p=l.hg;l=l.Qk;var q=-p-1,v=Et(void 0,{hg:-l-1,Qk:l});g.append(n);f.append(v);Jt(k,l,v);It(k,p);job(k,q,p)}else g.append(n),f.append(Tnb);else if(n&&1===n.type)p=e.hB(n.type,n.length),g.append(p),f.append(Ct(n.length));else if(l&&n)if(4===l.type||4===n.type){p=Ft(d,l.type);l=Ft(e,n.type);const [w,x]=c.transform(p.delta,l.delta);n=p.shift;l=l.shift;if(n)if(l){p=l.hg;l=l.Qk;q=n.hg;n=n.Qk;v=-p-1;const z=Et(void 0,{hg:-l-1,Qk:l}),B=Et(void 0,{hg:p,Qk:l});
g.append(B);f.append(z);Jt(h,n,B);Jt(k,l,z);It(h,q,w);It(k,p,x);job(k,v,q);kob(k,p,n)}else p=n.hg,l=n.Qk,q=Et(),g.append(q,"nocollapse"),f.append(Et(x,n)),Jt(h,l,q),It(h,p,w);else l?(n=l.hg,p=l.Qk,q=-n-1,v=Et(void 0,{hg:-p-1,Qk:p}),g.append(Et(w,l)),f.append(v),Jt(k,p,v),It(k,n,x),job(k,q,n)):(g.append(Et(w)),f.append(Et(x)))}else p=Math.min(l.length,n.length),l=d.hB(l.type,p),n=e.hB(n.type,p),2===l.type&&2===n.type?g.append(Ct(n.length)):g.append(n),f.append(l);else throw Error(`length mismatch (${a} x ${b})`);
l=d.head;n=e.head}return[g.build(h),f.build(k)]}Zj(a){if(!a.ops.length)return a;const b=this.Jf(),c=new qrb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Zj(d.delta);const e=d.shift&&mob(d.shift);e?(b.retain(e),Ht(c,e.Qk,a)):b.append(Et(a));break;case 3:a=d.shift&&mob(d.shift);null!=d.state?a?(b.retain(a),Ht(c,a.Qk,this.component.replace(d.state,void 0))):b.BU(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}nj(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.gfc(a.ops[c],b.ops[c]))return!1;return!0}gfc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.Ah(a.state,b.state)&&nob(a.shift,b.shift);case 4:return a.type===b.type&&this.component.nj(a.delta,b.delta)&&nob(a.shift,b.shift);default:throw new r(a);}}Xg(a){return new nrb(a)}identity(){return krb}apply(a,
b){if(!b.ops.length)return a;const c=orb.create(a,b.pre),d=new nrb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,Ct(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:gob(d,Gt(c,e.length));break;case 1:d.expand(e.length);break;case 2:oa(fob(Gt(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(hob(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Nj(a,b){if(!b.ops.length)return a;
const {unshift:c,fKe:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=orb.create(a,b.post),f=new nrb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,Ct(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:gob(f,Gt(e,g.length));break;case 1:oa(fob(Gt(e,g.length)));break;case 2:oa(fob(Gt(e,g.length)));f.expand(g.length);break;case 3:Bt(this.component,g.state,hob(e));break;case 4:f.append(this.component.Nj(hob(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.Jf(),c=this.Jf();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(Ct(d.length));c.append(d);break;case 4:d.shift?(b.retain(mob(d.shift)),c.append(Et(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(mob(d.shift)),c.append(Dt(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),fKe:c.build()}}Ah(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Ah(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof srb&&this.component.equals(a.component)}constructor(a){super();this.component=new tv(new jrb(a))}};var Lt,pob,trb,rob,tob,Kob,sob,Pob;Lt=Object.freeze({serialize:a=>a,deserialize:a=>a});uv=__c.uv=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});pob=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
trb=class{get serializer(){null==this.uyc&&(this.uyc=this.Z3d());return this.uyc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.Z3d=a}};rob=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
tob=Object.freeze({serialize(a){let b=0,c=0;const d=__c.oob(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,Yi:e}},deserialize({items:a,Yi:b}){const c=[];let d=0;for(const e of b)0>e?d+=-e:0<e&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});Kob=class{serialize(a){return Eh(a,b=>this.serializer.serialize(b))}deserialize(a){return Eh(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
sob=class{serialize(a){return Kt(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return Kt(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};Pob=class{serialize(a){return null!=a?this.serializer.serialize(a):void 0}deserialize(a){return null!=a?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new Rob(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new irb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var urb,yob,vrb,wrb;urb={next:()=>{},error:()=>{}};yob=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};vrb=class{create(a,b=__c.$qb,c=urb){a=this.Jx(a);b.subscribe(this.connect(a,c));return a}};
vv=__c.vv=class extends vrb{map(a,b,c,d,e,f){return new wrb(this,a,b,c,d,e,f,qob({serialize:b,deserialize:a},this.SXb),qob({serialize:d,deserialize:c},this.Yna))}constructor(a,b){super();this.SXb=a;this.Yna=b}};
wrb=class extends vv{Jx(a){return this.Ree(this.component.Jx(this.cga(a)))}connect(a,b){const c=this.component.connect(this.uJb(a),{next:d=>b.next(this.Nta(d)),error:d=>b.error(d)});return{next:d=>c.next(this.L_(d)),complete:()=>c.complete()}}Xb(a){return this.A$a(this.component.Xb(this.uJb(a)))}destroy(a,b){return this.component.destroy(this.uJb(a),this.cga(b))}zi(a,b){return this.component.zi(this.uJb(a),this.cga(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.Nta=b;this.L_=
c;this.A$a=d;this.cga=e;this.Ree=f;this.uJb=g;this.domain=this.component.domain.map(this.Nta,this.L_,this.A$a,this.cga)}};wv=__c.wv=class{connect(a){oa(null==this.DI);this.DI=a;return{next:b=>{this.DI&&wob(this,b)},complete:()=>this.complete()}}complete(){this.DI&&(this.DI=void 0,xob(this,"mutable disconnected"))}error(a){this.DI&&(this.DI.error(a),this.DI=void 0,xob(this,"mutable failure"))}Mp(a){var b;wob(this,a);this.domain.isIdentity(a)||(null===(b=this.DI)||void 0===b?void 0:b.next(a))}constructor(){this.clients=this.I2b=this.DI=void 0}};var xrb;xv=__c.xv=class{get(){this.cU.reportObserved();return this.value}set(a){__c.Rqb.identity(this.value,a)||(this.value=a,this.cU.reportChanged())}constructor(a){this.value=a;this.cU=Sqb("")}};
xrb=class{static F(a){M(a,{rkc:ov,aVb:ov})}get Zo(){return this.cols.length}get Ky(){return this.rows.length}get rkc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get aVb(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.EW(a,b));null==c&&Qqb()&&(c=new xv,this.values.set(this.EW(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];null==d&&(d=this.rows[a]=this.N0c++);a=this.cols[b];
null==a&&(a=this.cols[b]=this.L0c++);(b=this.values.get(this.EW(d,a)))?b.set(c):this.values.set(this.EW(d,a),new xv(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.EW(a,b));c&&c.set(void 0);this.values.delete(this.EW(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.EW(c,d));null!=b&&(b=b.get(),null!=b&&a(b,c,d))}}EW(a,b){return`${a}:${b}`}constructor(){xrb.F(this);this.L0c=this.N0c=0;this.rows=pv.array([],
{deep:!1});this.cols=pv.array([],{deep:!1});this.values=new Map}};var yrb,Gob,Hob,Fob,Iob,Job,zrb,Lob,Mob,Oob,Nob,Crb,Erb,Frb,Grb;Zt=__c.Zt=class{constructor(a){this.serializer=a}};yrb=class extends Zt{rw(a,b){return a===b}stringify(a){return JSON.stringify(a)}};Gob=class extends yrb{CM(a){return a===this.value}constructor(a){super(Lt);this.value=a}};Hob=class extends yrb{CM(a){return this.values.has(a)}constructor(a){super(Lt);this.values=a}};Fob=class extends yrb{constructor(a){super(Lt);this.CM=a}};
Iob=class extends Zt{CM(a){return a.every(b=>this.type.CM(b))&&(!this.L_a||this.L_a(a))}rw(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.rw(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.L_a=b}};
Job=class extends Zt{CM(a){return[...a].every(this.iae)}rw(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),null==a||!this.valueType.rw(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.iae=([d,e])=>zrb.every(f=>!d.includes(f))&&this.keyType.CM(d)&&this.valueType.CM(e)}};zrb=["$",".","\x00"];
Lob=class extends Zt{CM(a){return this.keys.every(b=>this.fields[b].CM(a[b]))&&(!this.L_a||this.L_a(a))}rw(a,b){return this.keys.every(c=>this.fields[c].rw(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(uv);this.fields=a;this.L_a=b;this.keys=Object.keys(this.fields)}};
Mob=class extends Zt{CM(a){return this.ZH[this.Mqb(a)].CM(a)}rw(a,b){const c=this.Mqb(a),d=this.Mqb(b);return c===d&&this.ZH[c].rw(a,b)}stringify(a){return this.ZH[this.Mqb(a)].stringify(a)}constructor(a,b){super(uv);this.ZH=a;this.Mqb=b}};Oob=class extends Zt{CM(a){return null==a||this.type.CM(a)}rw(a,b){return null!=a?null!=b&&this.type.rw(a,b):null==b}stringify(a){return null!=a?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
Nob=class extends yrb{CM(a){return"string"===typeof a&&this.lve.test(a)}constructor(a){super(Lt);this.lve=a}};yv=__c.yv=Qt(a=>"boolean"===typeof a);zv=__c.zv=Qt(a=>"string"===typeof a);__c.Arb=Qt(a=>1===a.length);__c.Brb=Xt(-2147483648,2147483647);Crb=Qt(a=>Number.isSafeInteger(a));Av=__c.Av=Xt(0,2147483647);__c.Drb=Xt(1,2147483647);__c.Bv=Xt(0,Number.MAX_SAFE_INTEGER);Cv=__c.Cv=Qt(a=>Number.isFinite(a));Dv=__c.Dv=Yt(0,Number.MAX_VALUE);Erb=Qt(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
Frb=St(Dv);Grb=St(zv);var Hrb,Qob;Hrb={next:a=>na(null==a),complete:()=>{}};
Qob=class extends vv{Jx(a){return null!=a?this.type.Jx(a):void 0}connect(a,b){if(null==a)return Hrb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}Xb(a){return null!=a?this.type.Xb(a):void 0}destroy(a,b){if(null!=a&&null!=b)this.type.destroy(a,b);else if(null!=a||null!=b)throw Error(`${this.Xb(a)} != ${b}`);}zi(a,b){return null!=a?null!=b&&this.type.zi(a,b):null==b}constructor(a,b,c){super(b,c);this.type=a;this.domain=new jrb(this.type.domain)}};__c.Gv=$t(zv);
__c.Irb=$t(yv);$t(__c.Brb);$t(Crb);__c.Hv=$t(Cv);__c.Jrb=$t(Av);__c.Krb=$t(__c.Bv);__c.Lrb=$t(Dv);var Mrb,Tob,Nrb,Uob,Qrb;Mrb=class extends wv{PW(a){if(null!=a)switch(a.type){case 1:na(this.Tjd.rw(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:na(null==a.delta);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){Dob(this.Tjd,a);const b=this._value.get();this.Mp(this.domain.replace(b,a))}constructor(a,b,c){super();this.Tjd=a;this.domain=b;this._value=new xv(c)}};
Tob=class extends vv{Jx(a){a=Dob(this.type,a);return new Mrb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.value}destroy(a,b){Eob(this.type,a.value,b)}zi(a,b){this.type.rw(a.value,b)||(a.value=b);return!0}constructor(a,b){super(uv,b);this.type=a;this.domain=new tv(new hrb((c,d)=>this.type.rw(c,d)))}};
Nrb=class extends wv{instantiate(a){const b=Nt(this,Sob),{mutable:c,Lv:d}=Ot(this.type,a,b);this.mlb.set(c);this.IJa=d;this.u6a=b}destroy(a){Pt(this.type,a,this.IJa,this.mlb.get())}PW(a){if(null!=a)switch(a.type){case 0:this.IJa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}get ref(){return this.mlb.get()}set(a){this.Mp(new irb(this.type.Xb(this.mlb.get()),a))}constructor(a,b,c){super();this.type=a;this.domain=b;a=Nt(this,Sob);const {mutable:d,
Lv:e}=Ot(this.type,c,a);this.mlb=new xv(d);this.IJa=e;this.u6a=a}};Uob=class extends vv{Jx(a){return new Nrb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return this.type.Xb(a.ref)}destroy(a,b){this.type.destroy(a.ref,b)}zi(a,b){this.type.zi(a.ref,b)||a.set(b);return!0}constructor(a,b){super(uv,b);this.type=a;this.domain=new tv(this.type.domain)}};Iv=__c.Iv=au(zv);Jv=__c.Jv=au(yv);__c.Kv=au(Cv);__c.Orb=au(Av);__c.Prb=au(__c.Bv);__c.Lv=au(Dv);Qrb=au(Erb);__c.Rrb=au(Frb);__c.Mv=au(Grb);
__c.Nv=cu(zv);__c.Srb=cu(yv);__c.Ov=cu(Cv);__c.Trb=cu(Av);__c.Pv=cu(Dv);var Vob=new Map,Urb=class extends sv{create(a,b){return Wob(this,a,this.component.replace(void 0,b))}update(a,b){return Wob(this,a,this.component.update(b))}replace(a,b,c){return Wob(this,a,this.component.replace(b,c))}delete(a,b){return Wob(this,a,this.component.replace(b,void 0))}identity(){return Vob}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Zj(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Zj(d),null!=a&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of Xob(a,b)){const e=this.component.compose(a.get(d),b.get(d));null!=e&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return[b,a];const c=new Map,d=new Map;for(const e of Xob(a,b)){const [f,g]=this.component.transform(a.get(e),b.get(e));null!=g&&c.set(e,g);null!=f&&d.set(e,f)}return[d,c]}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),d);null!=d?c.set(e,
d):c.delete(e)});return c}Nj(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Nj(a.get(e),d);null!=d?c.set(e,d):c.delete(e)});return c}Ah(a,b){return a===b||a.size===b.size&&Array.from(Xob(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.Ah(d,c)})}nj(a,b){return a===b||a.size===b.size&&Array.from(Xob(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.nj(d,c)})}equals(a){return this===a||a instanceof Urb&&
this.component.equals(a)}constructor(a){super();this.component=new tv(new jrb(a))}};__c.Vrb=class extends wv{static F(a){M(a,{refs:pv.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=null!=c?this.domain.replace(a,this.type.Xb(c),b):this.domain.create(a,b);this.Mp(c);c=this.get(a);if(null==c)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);null!=b&&(a=this.domain.delete(a,this.type.Xb(b)),this.Mp(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}Xb(){return Eh(this.refs,a=>this.type.Xb(a))}destroy(a){na(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.GAa.get(c));Pt(this.type,d,c.to,b)})}zi(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.zi(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}PW(a){a.forEach((b,c)=>{if(null!=b)switch(b.type){case 0:null!=b.delta&&m(this.GAa.get(c)).to.next(b.delta);break;case 1:null!=b.oldState?(this.bYb(c,b.oldState),this.refs.delete(c),this.GAa.delete(c)):(na(!this.refs.has(c)),na(!this.GAa.has(c)));if(null!=b.newState){const {iGc:d,value:e}=Yob(this,c,b.newState);this.refs.set(c,e);this.GAa.set(c,d)}break;default:throw new r(b);}})}bYb(a,b){const c=m(this.refs.get(a));a=m(this.GAa.get(a));
Pt(this.type,b,a.to,c)}constructor(a,b,c){super();__c.Vrb.F(this);this.type=a;this.domain=b;this.refs=new Map;this.GAa=new Map;c.forEach((d,e)=>{const {iGc:f,value:g}=Yob(this,e,d);this.refs.set(e,g);this.GAa.set(e,f)})}};__c.Vrb.prototype.KH=ea(108);
var Zob=class extends vv{Jx(a){return new __c.Vrb(this.type,this.domain,a)}Ol(a){return a}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){return this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(a,b){super(uv,b);this.type=a;this.domain=new Urb(this.type.domain)}};var Wrb={next:()=>{},complete:()=>{}},$ob=class extends vv{Jx(a){return Dob(this.type,a)}connect(){return Wrb}Xb(a){return a}destroy(a,b){Eob(this.type,a,b)}zi(a,b){return this.type.rw(a,b)}constructor(a,b){super(Lt,b);this.type=a;this.domain=new hrb((c,d)=>this.type.rw(c,d))}};var apb=class extends sv{static of(a){return new apb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>null==c||this.components[b].isIdentity(c))}Zj(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];null!=d&&(c=this.components[e],d=c.Zj(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];null!=e&&null!=g?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):null!=e?c[f]=e:null!=g&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return[b,a];for(const g of new Set([...e,...f]))if(e=a[g],f=b[g],null!=e&&null!=f){const h=this.components[g],[k,l]=h.transform(e,f);h.isIdentity(l)||(c[g]=l);h.isIdentity(k)||(d[g]=k)}else null!=e?c[g]=e:
null!=f&&(d[g]=f);return[d,c]}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].apply(a[e],c));return d}Nj(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].Nj(a[e],c));return d}Ah(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].Ah(a[c],b[c]))}nj(a,b){if(a===b)return!0;const c=Object.keys(a),d=Object.keys(b);
return!c.length&&!d.length||__c.Ds([...c,...d]).every(e=>{const f=a[e],g=b[e];return null!=f&&null!=g&&this.components[e].nj(f,g)})}equals(a){return this===a?!0:a instanceof apb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Yrb;
__c.Xrb=class extends wv{Xb(){const a=this.gaa,b=this.Qdb,c=this.PLa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].Xb(this.Sb[e]);for(const e in c)d[e]=c[e].Xb(this.attributes[e]);return d}destroy(a){const b=this.gaa,c=this.Qdb,d=this.PLa,e=this.$Ic;for(const f in b)Eob(b[f],this.values[f],a[f]);for(const f in c)Pt(c[f],a[f],this.q8c[f],this.Sb[f]);for(const f in d)Pt(d[f],a[f],this.RAc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}zi(a){const b=this.gaa,c=
this.Qdb,d=this.PLa;for(const e in b)if(!b[e].rw(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].zi(this.Sb[e],a[e]))return!1;for(const e in d)if(!d[e].zi(this.attributes[e],a[e]))return!1;return!0}PW(a){for(const b in a)null!=a[b]&&(b in this.Qdb?this.q8c[b].next(a[b]):b in this.PLa&&this.RAc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.gaa=b;this.Qdb=c;this.PLa=d;this.$Ic=void 0;
this.values=Kt(b,(g,h)=>Dob(g,f[h]));a=Kt(c,(g,h)=>{const k=dpb(this,h),{Lv:l,mutable:n}=Ot(g,f[h],k);return{ref:n,IJa:l,u6a:k}});this.Sb=Kt(a,g=>g.ref);this.q8c=Kt(a,g=>g.IJa);Kt(a,g=>g.u6a);d=Kt(d,(g,h)=>{const k=epb(this,h),{Lv:l,mutable:n}=Ot(g,f[h],k);return{ref:n,IJa:l,u6a:k}});this.attributes=Kt(d,g=>g.ref);this.RAc=Kt(d,g=>g.IJa);Kt(d,g=>g.u6a);if(e){const {Sb:g,attributes:h,jea:k}=e.create({...this.values,...this.Sb,...this.attributes});this.tFc=Kt(e.Sb,(l,n)=>g[n]);this.vVb=Kt(e.attributes,
(l,n)=>h[n]);this.$Ic=k}else this.tFc={},this.vVb={}}};__c.Xrb.prototype.EP=ea(110);Qv=__c.Qv=Symbol("$impl");Yrb=class extends vv{};
__c.Zrb=class extends Yrb{Jx(a){a=new __c.Xrb(this.domain,this.values,this.Sb,this.attributes,this.computed,a);const b={...a.values,...a.Sb,...a.tFc};Object.defineProperties(b,this.Ete);Object.defineProperty(b,Qv,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[Qv].connect(b)}Xb(a){return a[Qv].Xb()}destroy(a,b){a[Qv].destroy(b)}zi(a,b){return a[Qv].zi(b)}Sj({values:a={},Sb:b={},attributes:c={},computed:d}){return new __c.Zrb({...this.values,...a},{...this.Sb,...b},{...this.attributes,
...c},fpb(this.computed,d))}constructor(a,b,c,d){super(uv,uv);this.values=a;this.Sb=b;this.attributes=c;this.computed=d;this.domain=bpb(Kt(this.values,e=>new hrb((f,g)=>e.rw(f,g))),Kt(this.Sb,e=>e.domain),Kt(this.attributes,e=>e.domain));cpb(a,{...b,...(null===d||void 0===d?void 0:d.Sb)},{...c,...(null===d||void 0===d?void 0:d.attributes)});a=Kt(c,(e,f)=>({enumerable:!0,get(){return this[Qv].getAttribute(f)},set(g){this[Qv].setAttribute(f,g)}}));d=Kt((null===d||void 0===d?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[Qv].vVb[f].value},set(g){this[Qv].vVb[f].value=g}}));this.Ete={...a,...d}}};__c.Zrb.prototype.EP=ea(109);var gpb=new __c.Zrb({},{},{});var $rb=class extends sv{uK(a){return a}isIdentity(a){return 0===a}compose(a,b){return a+b}transform(a,b){return[b,a]}nj(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Nj(a,b){return a-b}Ah(a,b){return a===b}},asb=class extends $rb{Zj(a){return 0-a}equals(a){return this===a||a instanceof asb}},bsb=class extends $rb{uK(a){na(0<=a);return super.uK(a)}compose(a,b){na(0<=a);na(0<=b);return super.compose(a,b)}transform(a,b){na(0<=a);na(0<=b);return super.transform(a,b)}Zj(a){na(0<=a);return 0}apply(a,
b){na(0<=b);return super.apply(a,b)}Nj(a,b){na(0<=b);return super.Nj(a,b)}equals(a){return this===a||a instanceof bsb}},csb=new asb,dsb=new bsb;var esb=class extends wv{PW(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}uK(a){this.Mp(this.domain.uK(a))}constructor(a,b){super();this.domain=a;this._value=new xv(b)}},fsb=class extends vv{Jx(a){return new esb(this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.value}destroy(a,b){Bt(this.domain,a.value,b)}zi(a,b){a.uK(b-a.value);return!0}},gsb=class extends fsb{constructor(){super(Lt,Lt);this.domain=csb}},hsb=class extends fsb{zi(a,b){return b<
a.value?!1:super.zi(a,b)}constructor(){super(Lt,Lt);this.domain=dsb}};new gsb;new hsb;__c.Rv=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}Rm(a,b){return this.values.Rm(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}kEa(a,
b){return this.values.kEa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=a}};__c.da=__c.Rv.prototype;__c.da.AI=ea(126);__c.da.rU=ea(121);__c.da.T7=ea(117);
__c.da.Qr=ea(113);__c.da.KH=ea(107);__c.Sv=class extends wv{static F(a){M(a,{Y7:ov,hO:ov,empty:ov,Y5a:ov,Z9a:ov})}NFa(a){const b=Nt(this,e=>gu(this).retain(this.CK(c)).update(e).build()),{mutable:c,Lv:d}=Ot(this.type,a,b);return{id:String(this.Vzb++),value:c,to:d,from:b,toString:()=>`${c}`}}aYb(a,b){Pt(this.type,a,b.to,b.value)}get Y7(){const a=new Map;this.IJ.forEach((b,c)=>b&&a.set(b.value,c));return a}get hO(){return this.IJ.filter(__c.bb)}get(a){return(a=this.IJ[a])&&a.value}CK(a){return m(this.Y7.get(a),"ref not found")}PW(a){const b=
this.IJ,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,null!=g?this.NFa(g):void 0);h&&(d.set(h.hg,b[e]),c.set(h.Qk,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;null!=h&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;null==h?oa(null==b[e]):this.aYb(h,m(b[e]));b[e]=null!=
k?this.NFa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.hg,b[e]),c.set(g.Qk,e));e++;break;default:throw new r(f);}oa(d.size===a.GHa);oa(c.size===a.GHa);for(e=0;e<a.GHa;e++)oa(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&null==b[b.length-1];)b.length--}Xb(){const a=[];this.IJ.forEach((b,c)=>{null!=b&&(a[c]=this.type.Xb(b.value))});return a}zi(a){const b=this.IJ,c=gu(this);for(let e=0;e<b.length;e++){const f=b[e];null!=f&&null!=a[e]&&this.type.zi(f.value,a[e])||null==f&&null==a[e]?c.retain():
c.change(f&&this.type.Xb(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.Mp(c.build());return!0}get empty(){return!this.hO.length}count(){return this.hO.length}toArray(){return this.hO.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get Y5a(){const a=this.hO[0];return a&&a.value}get Z9a(){const a=this.hO[this.hO.length-1];return a&&a.value}first(a){if(!a)return this.Y5a;const b=
this.hO.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.Z9a;const b=this.hO;for(let c=b.length-1;0<=c;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.IJ;for(a=this.CK(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}Rm(a,b){const c=this.IJ;for(a=this.CK(a)-1;0<=a;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}has(a){return this.Y7.has(a)}insertAt(a,b){this.Mp(gu(this).retain(a).insert(b).build());return this.IJ[a].value}set(a,
b){var c;na(0<=a);a>=this.IJ.length&&(this.IJ.length=a+1);const d=null===(c=this.IJ[a])||void 0===c?void 0:c.value;c=null!=d?this.type.Xb(d):void 0;this.Mp(gu(this).retain(a).change(c,b).build());return this.IJ[a].value}replace(a,b){a=this.CK(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,a)}prepend(a){return this.kEa(void 0,a)}kEa(a,b){return this.insertAt(a?this.CK(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.CK(a):this.IJ.length,b)}delete(a){a=gu(this).retain(this.CK(a)).BU(this.type.Xb(a)).build();
this.Mp(a)}moveTo(a,b){const c=this.CK(b);if(c===a)return b;this.Mp(c<a?gu(this).retain(c).retain({hg:0,Qk:1}).retain(a-c-1).expand({hg:1,Qk:0}).build():gu(this).retain(a).expand({hg:0,Qk:1}).retain(c-a).retain({hg:1,Qk:0}).build());return b}map(a){return this.hO.map(({value:b,id:c})=>a(b,c))}flatMap(a){return this.hO.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.hO.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.IJ.forEach((b,c)=>null!=b&&a(b.value,b.id,c))}reduce(a,b){return this.hO.reduce((c,
d)=>a(c,d.value,d.id),b)}some(a){return this.hO.some(b=>a(b.value,b.id))}every(a){return this.hO.every(b=>a(b.value,b.id))}constructor(a,b,c){super();__c.Sv.F(this);this.type=a;this.domain=b;this.Vzb=0;na(!c.length||null!=c[c.length-1]);this.IJ=pv.array([...c.map(d=>this.NFa(d))],{deep:!1})}};__c.da=__c.Sv.prototype;__c.da.M1=ea(127);__c.da.AI=ea(125);__c.da.rU=ea(120);__c.da.T7=ea(116);__c.da.Qr=ea(112);__c.da.KH=ea(106);
__c.hu=class extends vv{Jf(){return this.domain.Jf()}Ol(a){return a}Jx(a){return new __c.Sv(this.type,this.domain,a)}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){let c=0;this.Ol(a).forEach((d,e,f)=>{na(f in b);this.type.destroy(d,b[f]);c++});a=b.reduce(d=>d+1,0);na(c===a)}zi(a,b){return this.Ol(a).zi(b)}constructor(a,b){super(uv,b);this.type=a;this.domain=new srb(this.type.domain)}};__c.hu.prototype.nv=ea(131);__c.Tv=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}Rm(a,b){return this.list.Rm(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return ju()}replace(){return ju()}kEa(){return ju()}insertBefore(){return ju()}append(){return ju()}prepend(){return ju()}delete(){return ju()}constructor(a){this.list=
a}};__c.da=__c.Tv.prototype;__c.da.AI=ea(124);__c.da.rU=ea(119);__c.da.T7=ea(115);__c.da.Qr=ea(111);__c.da.KH=ea(105);var isb;isb=class extends sv{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Zj(a){throw new r(a);}nj(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Nj(a){throw new r(a);}Ah(a){throw new r(a);}equals(a){return this===a||a instanceof isb}};__c.jsb=new isb;var ksb,lsb,psb,qsb,rsb,ssb,Xv,usb,vsb,tsb;ksb=class{};Uv=__c.Uv=class extends ksb{get length(){return this.state.length}oKb(a){hpb(this,a);return this.state.charAt(a)}kQ(a){ipb(this,a);return[new Uv(this.state.substring(0,a)),new Uv(this.state.substring(a))]}cH(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;na(!!a)}};
ou=__c.ou=class extends ksb{get length(){return 1}oKb(a){hpb(this,a);return this.state}kQ(a){ipb(this,a);throw Error();}cH(a){return new ou(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
Vv=__c.Vv=class extends ksb{get length(){return this.state}oKb(a){hpb(this,a)}kQ(a){ipb(this,a);return[new Vv(a),new Vv(this.state-a)]}cH(){return this}toString(){return 7>=this.state?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;na(!!a)}};
__c.Wv=class{get length(){return this.Pha+this.Rs+this.vqc}Lc(a){return new lsb(this,a)}cursor(a,b){return new __c.msb(this,a,b)}cH(a){const b=this.VB.map(c=>c.cH(a));return new __c.Wv(b,this.Pha,this.Rs,this.vqc)}Ya(){return this.VB.map(a=>0===a.type?a.state:"").join("")}forEach(a,b){for(const c of this.VB)switch(c.type){case 0:b.Ya&&b.Ya(c.state);break;case 1:b.item(c.state);break;case 2:b.Yi&&b.Yi(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.Yi&&b.Yi(a)}map(a,b){const c=
this.VB.map(d=>{switch(d.type){case 0:return b.Ya(d.state);case 1:return b.item(d.state);case 2:return b.Yi(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.Yi(a));return c}reduce(a,b){return this.VB.reduce((c,d)=>{switch(d.type){case 0:return a.Ya(c,d.state);case 1:return a.item(c,d.state);case 2:return a.Yi?a.Yi(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.nsb;
const d=new __c.osb;c=this.cursor(b);c.iP(a);c.iP(b-a,{item:e=>d.item(e),Ya:e=>d.Ve(e),Yi:e=>d.E4(e)});return d.build()}toString(){return this.VB.join("")}constructor(a,b,c,d){this.VB=a;this.Pha=b;this.Rs=c;this.vqc=d;a=a.length?a[a.length-1]:void 0;na(!a||2!==a.type)}};__c.Wv.prototype.Qxb=ea(132);__c.nsb=new __c.Wv([],0,0,0);
__c.osb=class{Ifa(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(null!=this.mode){switch(this.mode){case 0:this.VB.push(new Uv(this.Tdb));this.bob+=this.Tdb.length;this.Tdb="";break;case 2:this.VB.push(new Vv(this.Udb));this.LIb+=this.Udb;this.Udb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.Ve(a.state);case 1:return this.item(a.state);case 2:return this.E4(a.state);default:throw new r(a);}}Ve(a){a&&(this.Ifa(0),this.Tdb+=a);return this}item(a){this.flush();
this.VB.push(new ou(a));this.Y8b++;return this}E4(a){0<a&&(this.Ifa(2),this.Udb+=a);return this}append(a,b=0){a.forEach(b,{Ya:c=>this.Ve(c),item:c=>this.item(c),Yi:c=>this.E4(c)});return this}get length(){return this.bob+this.Y8b+this.LIb}build(){2!==this.mode&&this.flush();return this.length?new __c.Wv(this.VB,this.bob,this.Y8b,this.LIb):__c.nsb}constructor(){this.VB=[];this.mode=void 0;this.Tdb="";this.LIb=this.Y8b=this.bob=this.Udb=0}};
lsb=class{get head(){return this.Sk}get prevValue(){return this.edb&&this.edb.oKb(this.edb.length-1)}Fm(a){const b=m(this.Sk),c=b.length;na(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.kQ(a),this.Sk=a[1],this.edb=a[0];this.Sk=this.VB[this.i++];return this.edb=b}finish(){oa(null==this.Sk,"unconsumed reader head: {}",this.Sk)}constructor(a,b=0){this.i=0;this.edb=void 0;this.VB=(b=Math.max(0,b-a.length))?[...a.VB,new Vv(b)]:a.VB;this.Sk=this.VB.length?this.VB[this.i++]:void 0}};
__c.msb=class{get prevValue(){return this.Lc.prevValue}move(a,b,c){for(c=__c.jpb(this.D$a,c);a;){var d=this.Lc.head;if(d)switch(d=this.Lc.Fm(b||2!==d.type?Math.min(d.length,a):d.length),d.type){case 0:c&&c.Ya&&c.Ya(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.Yi&&c.Yi(d.state);b&&(a-=d.length);break;default:throw new r(d);}else na(b,"not enough characters or items: {}",a),c&&c.Yi&&c.Yi(a),a-=a}}iP(a,b){this.move(a,!0,b)}lm(a,b){this.move(a,!1,b)}finish(){this.Lc.finish()}constructor(a,
b,c){this.D$a=c;this.Lc=a.Lc(b)}};__c.msb.prototype.DFa=ea(133);__c.msb.prototype.AI=ea(123);psb=class{};qsb=class extends psb{get Z8(){return this.length}get jZ(){return this.length}hHb(a){kpb(this,a);return this.kQ(a)}gHb(a){lpb(this,a);return this.kQ(a)}kQ(a){return[new qsb(a),new qsb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
rsb=class extends psb{get Z8(){return 1}get jZ(){return 1}hHb(a){kpb(this,a);throw Error();}gHb(a){lpb(this,a);throw Error();}map(a){return new rsb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
ssb=class extends psb{get Z8(){return 0}get jZ(){return this.state.length}hHb(a){kpb(this,a);throw Error();}gHb(a){lpb(this,a);const [b,c]=this.state.kQ(a);return[new ssb(b),new ssb(c)]}map(a,b){return new ssb(this.state.cH(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
Xv=class extends psb{get Z8(){return this.oldState.length}get jZ(){return this.newState.length}hHb(a){kpb(this,a);return this.kQ(a)}gHb(a){lpb(this,a);return this.kQ(a)}kQ(a){const [b,c]=this.oldState.kQ(a),[d,e]=this.newState.kQ(a);return[new Xv(b,d),new Xv(c,e)]}map(a,b){return new Xv(this.oldState.cH(b),this.newState.cH(b))}toString(){return 2===this.oldState.type?2===this.newState.type?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:2===this.newState.type?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;ra(a.length,b.length)}};
usb=class{Lc(a,b){return new tsb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}cH(a,b){const c=this.ops.map(d=>d.map(a,b));return new usb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};vsb=new usb([],0,0);
__c.wsb=class{Ifa(a,b,c){if(this.uZ!==a||this.jcc!==b||this.Fbc!==c)switch(this.flush(),this.uZ=a,this.jcc=b,this.Fbc=c,a){case 0:break;case 2:0===c&&(this.wV="");break;case 3:0===b&&(this.qua="");0===c&&(this.wV="");break;default:throw new r(a);}}flush(){if(null!=this.uZ){switch(this.uZ){case 0:this.push(new qsb(this.acc));this.acc=0;break;case 2:var a=null!=this.wV?new Uv(this.wV):new Vv(this.acc);this.push(new ssb(a));this.wV=void 0;this.acc=0;break;case 3:a=null!=this.qua?new Uv(this.qua):new Vv(this.acc);
const b=null!=this.wV?new Uv(this.wV):new Vv(this.acc);this.push(new Xv(a,b));this.wV=this.qua=void 0;this.acc=0;break;default:throw new r(this.uZ);}this.Fbc=this.jcc=this.uZ=void 0}}push(a){this.ops.push(a);this.pre+=a.Z8;this.post+=a.jZ}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.Ysa(a.state);case 3:return lu(this,a.oldState,a.newState);default:throw new r(a);}}Ysa(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){na(0<=a);a&&(this.Ifa(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new rsb(a));this.pre++;this.post++;return this}expand(a){na(0<=a);a&&(this.Ifa(2,void 0,2),this.acc+=a);return this}insert(a){"string"===typeof a?a&&(this.Ifa(2,void 0,0),this.wV+=a):(this.flush(),this.push(new ssb(new ou(a))));return this}ena(a){na(0<=a);a&&(this.Ifa(3,2,2),this.acc+=a);return this}tYa(a){"string"===
typeof a?a&&(this.Ifa(3,2,0),this.acc+=a.length,this.wV+=a):(this.flush(),this.push(new Xv(new Vv(1),new ou(a))));return this}BU(a){"string"===typeof a?a&&(this.Ifa(3,0,2),this.acc+=a.length,this.qua+=a):(this.flush(),this.push(new Xv(new ou(a),new Vv(1))));return this}change(a,b){"string"===typeof a?"string"===typeof b?(ra(a.length,b.length),a&&(this.Ifa(3,0,0),this.qua+=a,this.wV+=b)):(ra(a.length,1),this.flush(),this.push(new Xv(new Uv(a),new ou(b)))):"string"===typeof b?(ra(1,b.length),this.flush(),
this.push(new Xv(new ou(a),new Uv(b)))):(this.flush(),this.push(new Xv(new ou(a),new ou(b))));return this}build(){0!==this.uZ&&this.flush();return new usb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.Fbc=this.jcc=this.uZ=void 0;this.acc=0;this.wV=this.qua=void 0}};__c.wsb.prototype.Zsa=ea(136);
tsb=class{get head(){return this.Sk}finish(){oa(null==this.Sk)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new qsb(b)]:a.ops;this.i=0;this.Sk=this.ops[this.i++]}};
__c.xsb=class extends sv{Jf(){return new __c.wsb(a=>this.component.isIdentity(a))}Xg(){return new __c.osb}id(){return vsb}Yz(){return __c.nsb}isIdentity(a){return!a.ops.length||a.ops.every(b=>0===b.type)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.Lc(0,b.pre),d=b.Lc(a.post,0),e=this.Jf();for(;;){let g=c.head;var f=d.head;if(!f)break;2===f.type?(g=void 0,f=mu(d)):g&&(f=Math.min(g.jZ,f.Z8),g=mpb(c,f),f=__c.nu(d,f));if(2===f.type)e.Ysa(f.state);else if(g)2===g.type?e.Ysa(pu(this,
g.state,f)):0===f.type?e.op(g):0===g.type?e.op(f):1===g.type?1===f.type?e.update(this.component.compose(g.delta,f.delta)):lu(e,opb(this,f.oldState,g),f.newState):lu(e,g.oldState,pu(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.Jf(),d=this.Jf(),e=a.Lc(b.pre,0),f=b.Lc(a.pre,0);for(;;){let h=e.head;var g=f.head;if(!h&&!g)break;h&&2===h.type?(h=mu(e),g=void 0):g&&2===
g.type?(h=void 0,g=mu(f)):h&&g&&(g=Math.min(h.Z8,g.Z8),h=__c.nu(e,g),g=__c.nu(f,g));if(h&&2===h.type)d.retain(h.jZ),c.op(h);else if(g&&2===g.type)d.op(g),c.retain(g.jZ);else if(h&&g)if(0===h.type||0===g.type)d.op(g),c.op(h);else if(3===h.type)d.retain(h.jZ),lu(c,pu(this,h.oldState,g),h.newState);else if(3===g.type)lu(d,pu(this,g.oldState,h),g.newState),c.retain(g.jZ);else{const [k,l]=this.component.transform(h.delta,g.delta);d.update(k);c.update(l)}else throw Error(`length mismatch (${a} x ${b})`);
}e.finish();f.finish();return[d.build(),c.build()]}Zj(a){if(!a.ops.length)return a;const b=this.Jf();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Zj(c.delta));break;case 2:a=c.state;2===a.type?b.retain(a.length):b.BU(a.state);break;case 3:a=c.oldState;const d=c.newState;2===a.type&&2===d.type?b.retain(a.length):lu(b,d,a);break;default:throw new r(c);}return b.build()}nj(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<
a.ops.length;c++)if(!this.gfc(a.ops[c],b.ops[c]))return!1;return!0}gfc(a,b){switch(a.type){case 0:return 0===b.type&&a.length===b.length;case 1:return 1===b.type&&this.component.nj(a.delta,b.delta);case 2:return 2===b.type&&qu(this,a.state,b.state);case 3:return 3===b.type&&qu(this,a.oldState,b.oldState)&&qu(this,a.newState,b.newState);default:throw new r(a);}}identity(){return vsb}apply(a,b){const c=this.Xg(),d=a.Lc(b.pre);for(a=b.Lc(a.length,0);;){b=d.head;var e=a.head;if(!e)break;2===e.type?(b=
void 0,e=mu(a)):b&&(e=Math.min(b.length,e.Z8),b=d.Fm(e),e=__c.nu(a,e));if(2===e.type)c.region(e.state);else if(b)c.region(pu(this,b,e));else break}d.finish();a.finish();return c.build()}Nj(a,b){const c=this.Xg(),d=a.Lc(b.post);for(a=b.Lc(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;2===e.type?(b=d.Fm(e.jZ),e=mu(a)):(e=Math.min(b.length,e.jZ),b=d.Fm(e),e=mpb(a,e));if(2===e.type)__c.npb(this,b,e.state);else if(b)c.region(opb(this,b,e));else break}d.finish();a.finish();return c.build()}Ah(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.Lc();b=b.Lc();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!qu(this,c,d))return!1;a.Fm(c.length);b.Fm(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.xsb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.xsb.prototype.tC=ea(141);__c.ru=new __c.xsb(__c.jsb);su=__c.su={item:a=>{throw new r(a);}};var ysb;ysb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.Ya);break;case 2:a.insert&&a.insert(d.Ya);break;case 1:a.delete&&a.delete(d.Ya);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static SE(){return new tu}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
tu=__c.tu=class{static insert(a,b){return(new tu).retain(a).insert(b).build()}static delete(a,b){return(new tu).retain(a).delete(b).build()}retain(a){na(0<=a);0<a&&(this.v4(0),this.TVa+=a);return this}insert(a){0<a.length&&(this.v4(2),this.O8a+=a);return this}delete(a){0<a&&(this.v4(1),this.VNa+=a);return this}v4(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.TVa;na(0<d);c.call(b,{type:0,Ya:d});this.pre+=this.TVa;this.post+=this.TVa;this.TVa=0;break;case 2:b=this.ops;
c=b.push;d=this.O8a;na(0<d.length);c.call(b,{type:2,Ya:d});this.post+=this.O8a.length;this.O8a="";break;case 1:b=this.ops;c=b.push;d=this.VNa;na(0<d);c.call(b,{type:1,Ya:d});this.pre+=this.VNa;this.post+=this.VNa;this.VNa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){0!==this.mode&&this.v4();return new ysb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.TVa=0;this.O8a="";this.VNa=0}};__c.zsb=class extends wv{static F(a){M(a,{Ya:ov})}get Ya(){return this.state.get().Ya()}insert(a,b){this.Mp(__c.ppb(this.state.get(),tu.insert(a,b)))}delete(a,b){this.Mp(__c.ppb(this.state.get(),tu.delete(a,b)))}PW(a){const b=qpb(this.state.get(),a);this.state.set(__c.ru.apply(this.state.get(),a));this.subject.next(b)}Xb(){return this.state.get()}destroy(a){na(__c.ru.Ah(this.state.get(),a))}zi(a){return __c.ru.Ah(this.state.get(),a)}constructor(a,b){super();__c.zsb.F(this);this.domain=a;this.subject=
new __c.Yqb;this.state=new xv(b)}};__c.zsb.prototype.ZL=ea(146);var Asb=class extends vrb{Ol(a){return a}Jx(a){return new __c.zsb(this.domain,a)}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(){super();this.domain=__c.ru}};new Asb;__c.Bsb=class extends sv{get target(){return m(this.MPb)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Zj(a){return this.target.Zj(a)}nj(a,b){return this.target.nj(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Nj(a,b){return this.target.Nj(a,b)}Ah(a,b){return this.target.Ah(a,b)}equals(a){return this===a||a instanceof __c.Bsb&&this.target.equals(a.target)}constructor(){super();
this.MPb=void 0}};__c.Bsb.prototype.Ena=ea(148);__c.Yv=class extends vv{get type(){return m(this.OPb)}Jx(a){return this.type.Jx(a)}connect(a,b){return this.type.connect(a,b)}Xb(a){return this.type.Xb(a)}destroy(a,b){this.type.destroy(a,b)}zi(a,b){return this.type.zi(a,b)}constructor(){super(new trb(()=>this.type.SXb),new trb(()=>this.type.Yna));this.OPb=void 0;this.domain=new __c.Bsb}};__c.Yv.prototype.Ena=ea(147);var Csb,Isb,Dsb,Esb;Csb=spb({},{});
__c.Hsb=class{Lc(a){return new Dsb(this,a)}cursor(a,b){return new Esb(this,a,b)}forEach(a,{grad:b,rc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.ID,d.cF);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,rc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.ID,e.cF);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,rc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.ID,e.cF):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Fsb;const d=new __c.Gsb;c=this.cursor(b);c.move(a);d.attrs(c.$M,c.Iea);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).rc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.cF))b.push(`${c}:${null!=
d?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;na(!a||1!==a.type)}};__c.Hsb.prototype.Nyb=ea(149);__c.Fsb=new __c.Hsb([],0);
__c.Jsb=class{Lc(a,b){return new Isb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!wpb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.vpb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${null!=e.so?`"${e.so}"`:"null"}=>${null!=e.sn?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.Ksb=new __c.Jsb([],0,0);
Isb=class{get VK(){return this.llb}get next(){return this._next}Sy(a,b){const c=m(this._next);oa(c.type===a,"{} != {}",c.type,a);na(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.llb[d]=f:delete this.llb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.vXa&&(this._next=xpb(this.vXa,zt(this.llb,()=>({r:void 0}))),this.vXa=0));return c.changes}Gx(a){return this.Sy(0,
a)}sba(a){return this.Sy(1,a)}finish(){oa(!this._next)}constructor(a,b=0,c=0){this.i=0;this.llb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.vXa=Math.max(0,b-a.pre,c-a.post);!this._next&&this.vXa&&(this._next=xpb(this.vXa),this.vXa=0)}};
Dsb=class{get head(){return this.Sk}get $M(){return this.nG}get Iea(){return this.LPb}Fm(a){var b=this.Sk;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Sk=a<b?tpb(b-a):this.input[this.i++];return a}apply(a){__c.vu(a.ID,a.cF,(b,c,d)=>{null!=c&&null!=d?(this.nG[b]=c,this.LPb[b]=d):(delete this.nG[b],delete this.LPb[b])})}ut(){const a=this.Sk;if(!a||1===a.type)return Csb;this.Sk=this.input[this.i++];this.apply(a);return a}finish(){oa(!this.Sk)}constructor(a,
b=0){this.i=0;this.nG={};this.LPb={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,tpb(b)]:a.items;this.Sk=this.input.length?this.input[this.i++]:void 0}};
Esb=class{get SC(){return this.Lc.length-this.Iaa}get $M(){return this.Lc.$M}get Iea(){return this.Lc.Iea}move(a,b){var c=this.D$a;b=c?b?{cells:__c.ku(c.cells,b.cells)}:c:b;na(0<=a,"{} < 0",a);a=this.Iaa+a;for(na(a<=this.Lc.length,"{} > {}",a,this.Lc.length);this.Iaa<a;){c=this.Lc.ut();const d=this.Lc.Fm(a-this.Iaa);this.Iaa+=d;b&&b.cells&&b.cells(d,c.ID,this.$M,c.cF,this.Iea)}}finish(){this.Lc.ut();this.Lc.finish()}constructor(a,b,c){this.D$a=c;this.Iaa=0;this.Lc=new Dsb(a,b)}};
__c.Gsb=class{Pl(a,b,c){this.ss[a]!==c?(this.ID[a]=b,this.cF[a]=c):(delete this.ID[a],delete this.cF[a]);return this}attrs(a,b){__c.vu(a,b,(c,d,e)=>this.Pl(c,d,e));return this}rc(a){0<a&&(Object.keys(this.ID).length&&(this.length&&(this.items.push(tpb(this.length)),this.length=0),this.items.push(spb(this.ID,this.cF)),__c.vu(this.ID,this.cF,(b,c,d)=>{if(null!=c){this.as[b]=c;this.ss[b]=d;var e;(null!==(e=this.attributes[b])&&void 0!==e?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.ID={},this.cF={}),this.length+=a,this.D_+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),rc:c=>this.rc(c)});return this}build(){for(const a of __c.uu(this.as))this.Pl(a);for(const a of __c.uu(this.ID))this.Pl(a);Object.keys(this.ID).length?(oa(!!this.length,"attributes still open: {}",this.ID),this.items.push(tpb(this.length)),this.items.push(spb(this.ID,this.cF)),this.length=0,this.ID={},this.cF={}):this.D_-=this.length;return new __c.Hsb(this.items,this.D_,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.D_=0;this.ID={};this.cF={}}};var xu,Lsb,Msb,Nsb,yu,Psb,Osb,Rsb,Ssb,Tsb,Qsb;xu=class{static from(a){if(a instanceof xu)return a;if(Array.isArray(a)){const [b,c]=a;return new xu(b,c)}return new xu(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
Lsb=class{get isEmpty(){return!this.Je.size}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Je){var d=b<f.from||f.to<a?void 0:new xu(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new Lsb(c)}toString(){return[...this.Je].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Je=a}};Msb=new Lsb;
Nsb=class{range(a,b){b?this.w5.set(a,xu.from(b)):this.w5.delete(a);return this}Je(a){a.forEach((b,c)=>this.w5.set(c,xu.from(b)));return this}build(){return this.w5.size?new Lsb(this.w5):Msb}constructor(){this.w5=new Map}};yu=class{toString(){return`${this.a9||"_"}->${this.X8||"_"}`}constructor(a,b){this.a9=a;this.X8=b}};Psb=class{toString(){return`${Osb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};Osb={[0]:"R",[1]:"I"};
Rsb=class{Lc(a,b){return new Qsb(this,a,b)}toString(){const a=this.mba.join(""),b=[...this.Je].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.mba=a;this.Je=b;this.pre=c;this.post=d}};Ssb=new Rsb([],new Map,0,0);
Tsb=class{append(a,b){na(0<=b,"{} < 0",b);if(!b)return this;this.uZ===a?this.length+=b:(null!=this.uZ&&this.ops.push(new Psb(this.uZ,this.length)),this.uZ=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.HVa(a,void 0,b)}HVa(a,b,c){b=new yu(b&&xu.from(b),c&&xu.from(c));this.Je.set(a,b);return this}LHa(a){a.forEach((b,c)=>this.Je.set(c,
b));return this}build(){const a=this.uZ,b=this.length;0===a?(this.pre-=b,this.post-=b):null!=a&&this.ops.push(new Psb(a,b));return this.ops.length||this.Je.size?new Rsb(this.ops,this.Je,this.pre,this.post):Ssb}constructor(){this.ops=[];this.uZ=void 0;this.post=this.pre=this.length=0;this.Je=new Map}};
Qsb=class{get next(){return this._next}get Xgc(){return this.klb}get RCb(){return this.fLa}get lEa(){return this.fLa-this.klb}Sy(a,b){const c=m(this._next);oa(c.type===a,"{} != {}",c.type,a);na(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new Psb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}Gx(a){this.Sy(0,a);this.klb+=a;this.fLa+=a}sba(a){this.Sy(1,a);this.fLa+=a}finish(){oa(!this._next)}constructor(a,b=0,c=0){this.fLa=this.klb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.mba,new Psb(0,b)]:a.mba;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.Usb=class extends sv{Xg(){return new Nsb}Jf(){return new Tsb}isIdentity(a){return!a.mba.length&&!a.Je.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of Bpb(a.Je,b.Je)){var g=a.Je.get(f),h=b.Je.get(f);g&&h?(na(wu(g.X8,h.a9)),e.set(f,new yu(g.a9,h.X8))):g?c.set(f,g):h&&d.set(f,h)}f=this.Jf();g=a.Lc(0,b.pre);a=b.Lc(a.post,0);b=g.next;for(h=a.next;h;){if(1===h.type)b=h.length,zu(c,void 0,g.RCb+a.lEa,b),a.sba(b),f.insert(b);
else if(b)1===b.type?(b=Math.min(b.length,h.length),zu(d,a.Xgc-g.lEa,void 0,-b),g.sba(b),a.Gx(b),f.insert(b)):(b=Math.min(b.length,h.length),g.Gx(b),a.Gx(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.LHa(e);f.LHa(c);f.LHa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];var c=new Map,d=new Map;const e=new Map;for(var f of Bpb(a.Je,b.Je)){var g=a.Je.get(f),h=b.Je.get(f);g&&h?(na(wu(g.a9,h.a9)),e.set(f,new yu(h.X8,
g.X8))):g?c.set(f,g):h&&d.set(f,h)}g=a.Lc(b.pre,0);h=b.Lc(a.pre,0);f=this.Jf();const k=this.Jf();var l=g.next;let n=h.next;for(;l||n;){if(l&&1===l.type)l=l.length,zu(d,h.Xgc+g.lEa,h.RCb+g.lEa,l),g.sba(l),k.retain(l),f.insert(l);else if(n&&1===n.type)l=n.length,zu(c,g.Xgc+h.lEa,g.RCb+h.lEa,l),zu(e,void 0,g.RCb+h.lEa,l),h.sba(l),k.insert(l),f.retain(l);else if(l&&n)l=Math.min(l.length,n.length),g.Gx(l),h.Gx(l),k.retain(l),f.retain(l);else throw Error(`unreachable case: ${l} x ${n}`);l=g.next;n=h.next}g.finish();
h.finish();d=k.LHa(d).build();c=f.LHa(c).LHa(e).build();ra(d.post-d.pre,b.post-b.pre);ra(c.post-c.pre,a.post-a.pre);return[d,c]}Zj(a){if(!a.Je.size)return Ssb;const b=new Map(a.Je);ypb(a,{insert:(c,d,e)=>zu(b,e,void 0,c)});a=Eh(b,c=>new yu(c.X8,c.a9));return new Rsb([],a,0,0)}nj(a,b){if(a===b)return!0;if(a.mba.length!==b.mba.length||a.Je.size!==b.Je.size)return!1;for(let e=0;e<a.mba.length;e++){var c=a.mba[e],d=b.mba[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Je.keys())if(c=
a.Je.get(e),d=b.Je.get(e),c?!(d&&wu(c.a9,d.a9)&&wu(c.X8,d.X8)):d)return!1;return!0}id(){return Ssb}identity(){return Ssb}apply(a,b){if(this.isIdentity(b)||!a.Je.size&&!b.Je.size)return a;const c=this.Xg(),d=new Map(a.Je);for(const [e,f]of b.Je)na(wu(a.Je.get(e),f.a9)),d.delete(e),c.range(e,f.X8);ypb(b,{insert:(e,f,g)=>Apb(d,g,e)});return c.Je(d).build()}Nj(a,b){if(this.isIdentity(b)||!a.Je.size&&!b.Je.size)return a;const c=this.Xg(),d=new Map(a.Je);for(const [e,f]of b.Je)na(wu(a.Je.get(e),f.X8)),
d.delete(e),c.range(e,f.a9);ypb(b,{insert:(e,f)=>Apb(d,f,-e)});return c.Je(d).build()}Ah(a,b){const c=a.Je,d=b.Je;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>wu(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.Usb}constructor(){super();this.Yz=Msb}};__c.Usb.prototype.tC=ea(140);__c.Vsb=new __c.Usb;var Wsb=class extends sv{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=Cpb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=Cpb(a.key,b.key),[d,e]=this.components[c].transform(a.value,b.value);return[{key:c,value:d},{key:c,value:e}]}Zj(a){return{key:a.key,value:this.components[a.key].Zj(a.value)}}nj(a,b){return a.key===b.key&&this.components[a.key].nj(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=Cpb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Nj(a,b){const c=Cpb(a.key,b.key);return{key:c,value:this.components[c].Nj(a.value,b.value)}}Ah(a,b){return a.key===b.key&&this.components[a.key].Ah(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var Xsb=class extends sv{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Zj(a){return this.sum.Zj(a)}nj(a,b){return this.sum.nj(a,b)}identity(a){return this.sum.identity(Au(this,a))}apply(a,b){return this.sum.apply(Au(this,a),b).value}Nj(a,b){return this.sum.Nj(Au(this,a),b).value}Ah(a,b){return this.sum.Ah(Au(this,a),Au(this,b))}equals(a){return this===a||a instanceof Xsb&&this.sum.equals(a.sum)}constructor(a,b){super();
this.components=a;this.lOa=b;this.sum=new Wsb(this.components)}};var Dpb=class extends vv{create(a,b,c){return super.create(a,b,c)}Jx(a){const b=this.lOa(a);return this.ZH[b].Jx(a)}connect(a,b){const c=this.Nqb(a),d=this.ZH[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{na(e.key===c);d.next(e.value)},complete:()=>d.complete()}}Xb(a){const b=this.Nqb(a);return this.ZH[b].Xb(a)}destroy(a,b){const c=this.Nqb(a),d=this.lOa(b);na(c===d);this.ZH[c].destroy(a,b)}zi(a,b){const c=this.Nqb(a),d=this.lOa(b);return c===d&&this.ZH[c].zi(a,
b)}constructor(a,b,c){super(uv,uv);this.ZH=a;this.lOa=b;this.Nqb=c;this.domain=new Xsb(zt(this.ZH,d=>d.domain),this.lOa)}};var Ysb=class extends sv{isIdentity(){return!0}compose(){return 1}transform(){return[1,1]}Zj(){return 1}nj(){return!0}identity(){return 1}apply(){return 1}Nj(){return 1}Ah(){return!0}equals(a){return this===a||a instanceof Ysb}constructor(){super();this.unit=1}},Zsb=new Ysb;var $sb=class extends vv{Jx(a){return a}connect(){return{next:()=>{},complete:()=>{}}}Xb(a){return a}destroy(){}zi(){return!0}constructor(){super(Lt,Lt);this.domain=Zsb}};new $sb;var atb=new Map,btb=class extends sv{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>0===b)}compose(a,b){return Fpb(a,b)}transform(a,b){return[b,a]}Zj(a){return a.size?Eh(a,b=>-b):a}nj(a,b){return Epb(a,b)}identity(){return atb}apply(a,b){return Fpb(a,b)}Nj(a,b){return Fpb(a,this.Zj(b))}Ah(a,b){return Epb(a,b)}equals(a){return this===a||a instanceof btb}};var ctb,dtb;
ctb=class extends wv{static F(a){M(a,{values:ov.struct})}PW(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}Xb(){return new Map(this.map)}zi(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.Mp(c);return!0}add(a){const b=this.map.get(a)||0;0<b||this.Mp(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.Mp(new Map([[a,-b]]))}has(a){return 0<(this.map.get(a)||0)}get values(){return[...Gpb(this.map,
a=>0<a).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();ctb.F(this);this.domain=a;this.map=new Tqb(b)}};dtb=class extends vv{Jx(a){return new ctb(this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.Xb()}destroy(a,b){na(this.domain.Ah(a.Xb(),b))}zi(a,b){return a.zi(b)}constructor(){super(uv,uv);this.domain=new btb}};__c.etb=new dtb;var itb,jtb,mtb,Zv,vtb,Ctb,Dtb,Ftb,Htb,Jtb,Ltb,Ntb,Otb,Ptb,Qtb,Rtb,Stb,Utb,Vtb,Xtb,Ztb;__c.ftb=Ut({id:zv,version:Av});__c.gtb=fu({values:{app:__c.ftb},attributes:{rha:au(__c.Tt(zv,zv))}});__c.htb=Yt(-1,1);itb=Yt(0,100);jtb=Yt(-100,100);__c.ktb=Yt(0,1);__c.ltb=Yt(-180,180);mtb=au(itb);Zv=au(jtb);__c.ntb=au(__c.ktb);__c.otb=au(__c.ltb);$v=__c.$v=Wt(qv);__c.ptb=$t($v);__c.qtb=au(__c.ptb);__c.rtb=Wt(/^100%$/);__c.stb=Wt(/^[0-9]+(\.[0-9]+)?%$/);__c.ttb=Wt(/^[0-9]+(\.[0-9]+)?px/);__c.utb=__c.du(eu(zv));
vtb=Xt(0,10);__c.wtb=St(vtb,a=>10>=a.length);__c.xtb=au(__c.wtb);__c.ytb=Wt(Hpb("L"));__c.ztb=Wt(Hpb("T"));__c.Atb=au(Rt(1,2,3));__c.Btb=Ut({text:zv,LD:yv});Ctb=Ut({top:Cv,left:Cv,width:Dv,height:Dv,rotation:__c.ltb});Dtb=Ut({id:zv,xf:Cv});__c.Etb=fu({attributes:{zma:cu(Dtb),brightness:Zv,contrast:Zv,saturation:Zv,DW:Zv,UXa:mtb,blur:Zv,vga:Zv,Cxa:Zv,Uha:mtb,Joa:mtb,highlights:Zv,b4:Zv,VW:mtb,Vra:mtb}});Ftb=bu($t(__c.Etb));
__c.Gtb=fu({values:{media:__c.ftb},Sb:{filter:Ftb},attributes:{$E:cu(__c.ftb),ae:cu(Ctb),Qa:__c.ntb,Qf:au(__c.Tt($v,$v)),altText:cu(__c.Btb)}});Htb=bu($t(__c.Gtb));__c.Itb=Rt(1,2);Jtb=Ut({pd:Dv,Px:Dv});__c.Ktb=fu({values:{video:zv,id:__c.Gv},Sb:{filter:Ftb},attributes:{ae:au(Ctb),Qa:__c.ntb,Qf:au(__c.Tt($v,$v)),altText:cu(__c.Btb),trim:cu(Jtb),yma:au(__c.Itb),autoplay:Jv,playbackRate:cu(Yt(.25,4)),volume:au(Yt(0,4))}});Ltb=bu($t(__c.Ktb));__c.Mtb=Ut({top:Cv,left:Cv});Ntb=Ut({width:Dv,height:Dv});
Otb=Ut({color:$v,Qa:__c.ktb,position:Cv},a=>-1<=a.position&&2>=a.position);Ptb=St(Otb,a=>2<=a.length&&a.every((b,c,d)=>0===c||d[c-1].position<=b.position));Qtb=au(Ptb);Rtb=fu({values:{type:Rt("linear")},attributes:{Oh:Qtb,rotation:__c.otb}});Stb=fu({values:{type:Rt("radial")},attributes:{Oh:Qtb,center:au(__c.Mtb)}});__c.Ttb=Bu({linear:Rtb,radial:Stb},a=>a.type,a=>a.type);Utb=bu($t(__c.Ttb));
__c.aw=fu({Sb:{image:Htb,video:Ltb,gradient:Utb},attributes:{dropTarget:__c.Srb,color:__c.qtb,Qa:__c.ntb,locked:Jv,PC:Jv,jR:__c.Nv,Tn:__c.Nv,flipX:Jv,flipY:Jv}});__c.bw=fu({Sb:{fill:__c.aw},attributes:{weight:__c.Lv,color:__c.qtb,Zm:__c.xtb,gr:Jv}});Vtb=Ut({top:Cv,left:Cv,height:Dv,width:Dv});__c.Wtb=au(Vtb);Xtb=Ut({Hf:St(Av)});__c.Ytb=au(Xtb);Ztb=Ut({text:zv,user:zv,brand:zv});var $tb,aub,bub,cub,dub,eub,fub;$tb=fu({values:{type:Rt("embed")},attributes:{text:Iv,url:Iv}});aub=Ut({day:Av,month:Av,year:Av});bub=fu({values:{type:Rt("date")},attributes:{text:Iv,language:Iv,style:au(Rt(1,2,3,4,5)),date:au(aub)}});cub=fu({values:{type:Rt("mention")},attributes:{text:Iv,user:Iv,brand:Iv}});dub=fu({values:{id:zv},attributes:{label:Iv},Sb:{fill:__c.aw}});eub=iu(dub);
fub=fu({values:{type:Rt("select")},attributes:{Ar:__c.Nv},Sb:{options:eub}}).map(a=>a,a=>a,__c.Ipb,__c.Jpb,function(a){return Object.create(a,{text:{get(){var b=a.options;const c=a.Ar;b=c&&b.first(({id:e})=>e===c)||b.first();var d;return null!==(d=null===b||void 0===b?void 0:b.label)&&void 0!==d?d:""}}})},a=>a);__c.gub=Bu({embed:$tb,date:bub,mention:cub,select:fub},a=>a.type,a=>a.type);__c.hub=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return"false"!==a;default:throw Error();}}validate(a){na(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.MJc(a)}MJc(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.VVc=c}};__c.Fu=Object.keys({Ys:0})[0];
__c.Upb=class{getScope(a){return this.attributes[a].scope}Nka(a){if("function"===typeof a)return a;switch(a){case "all":return()=>!0;case "block":return this.L$d;case "inline":return this.sae;default:throw new r(a);}}copy(a,b,c){__c.Hu(this,b,a,(d,e)=>c[e]=d)}N4(a){for(const [b,c]of Object.entries(a))na(this.BB(b)),null!=c&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);null!=b&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return null!=b?a.normalize(b):void 0}encode(a,
b){return __c.Eu(this.attributes[a],b)}decode(a,b){return __c.Du(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.YIa=b;this.wOa=c;this.qFe=d;this.rl=zt(this.attributes,e=>e.defaultValue);this.kqb={as:this.rl,ss:zt(this.rl,(e,f)=>null!=e?this.encode(f,e):void 0)};this.BB=e=>e in this.attributes;this.L$d=e=>"block"===this.getScope(e);this.sae=e=>"inline"===this.getScope(e);this.gxb=e=>{e=Kpb(e);return!(!e||!this.wOa.has(e))};this.fSa=e=>"string"!==typeof e?!1:null!=__c.Gu(this,e);
this.WVc=e=>{const f=this.qFe;return"string"===typeof e&&f.has(e)};this.txa=(e,f,g)=>f===g?!0:null!=f&&null!=g?this.attributes[e].txa(f,g):null==f&&null==g}};__c.Upb.prototype.SY=ea(150);
var Ppb=class extends __c.hub{MLa(){return new Ppb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}txa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);na(Number.isInteger(b)&&-2147483648<=b);na(Number.isInteger(c)&&2147483647>=c);na(Number.isInteger(d));
na(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.Cu(this)}},Rpb=class extends __c.hub{MLa(){return new Rpb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}MJc(a){return 0===a?a:Number(a.toPrecision(this.Cdd))}txa(a,b){return a===b}encode(a){return`${"fixed"===this.jta&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,Cdd:d=6,jta:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);na(Number.isFinite(b)&&b>=-Number.MAX_VALUE);na(Number.isFinite(c)&&c<=Number.MAX_VALUE);na(Number.isInteger(d)&&1<=d&&15>=d);this.min=b;this.max=c;this.units=g;this.Cdd=d;this.jta=e;__c.Cu(this)}},Spb=class extends __c.hub{isValid(a){return this.vVa.test(a)}MLa(){return new Spb(this.scope,this.vVa,this.defaultValue,!0)}txa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.vVa=
b;__c.Cu(this)}},Tpb=class extends __c.hub{isValid(a){return this.Vjd.has(a)}MLa(){return new Tpb(this.scope,this.Vjd,this.defaultValue,!0)}txa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.Vjd=new Set(b);__c.Cu(this)}};var mub,nub,oub;__c.iub="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.jub=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.kub=["normal","italic"];__c.lub=["none","underline"];mub=["start","center","end","justify"];
cw=__c.cw={fontFamily:Ku("inline",__c.jub,"YACgEZ1cb1Q,0"),fontSize:Ju("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:Lu("inline",__c.iub),fontStyle:Lu("inline",__c.kub),pY:Ku("inline",__c.crb,"1"),verticalAlign:Ku("inline",__c.erb,"0%"),color:Ku("inline",qv,"#000000"),backgroundColor:Ku("inline",brb,"transparent"),Fza:Ju("inline",{min:0,max:.2,units:"em"}),Eza:Ju("inline",{min:0,max:.16,units:"em"}),$m:Lu("inline",__c.lub),Az:Lu("inline",["none","strikethrough"]),link:Ku("inline",__c.arb,
""),letterSpacing:Ju("inline",{min:-.2,max:.8,units:"em"}),lineHeight:Ju("block",{min:.5,max:2.5,defaultValue:1.4}),direction:Lu("block",["ltr","rtl"]),textAlign:Lu("block",mub),HM:Lu("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),cP:__c.Qpb({min:0}),marginInlineStart:__c.Qpb({min:0,max:200,units:"px"}),textIndent:__c.Qpb({min:0,max:32,units:"px"}),uYa:Ku("inline",/^$/,""),vYa:Ku("inline",/^$/,""),mib:Ku("inline",/^$/,"")};
nub={sAa:Ku("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};oub={...zt(cw,a=>a.MLa()),Cz:Lu("inline",["add","delete"]).MLa()};__c.dw=__c.Vpb({static:cw,vOa:nub,Ys:oub});__c.pub=`${Object.keys({sAa:0})[0]}/`;__c.qub=Object.keys({Cz:0})[0];var tub=class{v4(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Mu(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Wpb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){na(0<=b,"{} < 0",b);b&&(this.v4(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){0!==this.mode&&this.v4();return this.ops?new rub(this.ops,this.pre,this.post):sub}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},uub=class{static create(a,b,c,d=0,e=0){na(0<=d,"{} < 0",d);na(0<=e,"{} < 0",e);b=Math.max(0,d-b,e-c);return new uub(b?[...a,Mu(b)]:a)}get head(){return this.Sk}Gx(a){return this.hB(0,a).length}hB(a,b=1){const c=m(this.Sk);if(c.type!==a)throw Error();const d=c.length;na(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Sk=Mu(d-b),Mu(b);case 1:return this.Sk=Wpb(d-b),Wpb(b);default:throw new r(a);}else return this.Sk=this.ops[this.i++],c}finish(){oa(null==this.Sk)}constructor(a){this.ops=a;this.i=0;this.Sk=a[this.i++]}},rub=class{isEmpty(){return 0===this.pre&&0===this.post&&0===this.ops.length}Lc(a,b){return uub.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},sub=new rub([],0,0),vub=class extends sv{Jf(){return new tub}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Jf(),d=a.Lc(0,b.pre),e=b.Lc(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(1===g.type)c.append(e.hB(g.type,g.length));else if(f)if(1===f.type){var h=Math.min(f.length,g.length);d.hB(f.type,h);e.hB(g.type,h);c.append(Wpb(h))}else h=
Math.min(f.length,g.length),d.hB(f.type,h),e.hB(g.type,h),c.append(Mu(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const c=a.Lc(b.pre,0),d=b.Lc(a.pre,0),e=this.Jf(),f=this.Jf();for(var g=c.head,h=d.head;g||h;){if(g&&1===g.type)h=c.hB(g.type,g.length),f.append(Mu(h.length)),e.append(h);else if(h&&1===h.type){var k=d.hB(h.type,
h.length);f.append(k);e.append(Mu(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.hB(g.type,k),h=d.hB(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return[f.build(),e.build()]}Zj(){return sub}nj(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.Lc();b=b.Lc();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(0!==d.type||c.length!==d.length)return!1;a.Gx(c.length);
b.Gx(d.length);break;case 1:if(1!==d.type||c.length!==d.length)return!1;Nu(a,c.length);Nu(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return sub}apply(a){return a}Nj(a){return a}Ah(a,b){return a===b}equals(a){return this===a||a instanceof vub}},Xpb=new Map,Su=new vub;var xub,zub,yub,wub,Bub,$pb,Cub,Dub;
xub=class extends sv{Xg(){return new $pb(this.Qz)}Yz(){return wub}Hd(a={}){return{x:a.x||Su.Jf().build(),y:a.y||Su.Jf().build(),attrs:a.attrs||Pu(this).build()}}isIdentity(a){return Su.isIdentity(a.x)&&Su.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=Su.compose(a.x,b.x),d=Su.compose(a.y,b.y);a=cqb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.Hd({x:c,y:d,attrs:a});const e=Pu(this);Ru(a,b.attrs,e,(f,g,h)=>{g?h?(oa(this.Qz(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}wCa(a,b,c,d){return Su.isIdentity(c)&&Su.isIdentity(d)||b.items.isEmpty()?b:bqb(a,this.Qz,b,c,d)}transform(a,b){const [c,d]=Su.transform(a.x,b.x),[e,f]=Su.transform(a.y,b.y);a=cqb(this,a.attrs,c,e);b=cqb(this,b.attrs,d,f);if(a.items.isEmpty()||b.items.isEmpty()){var g=this.Hd({x:c,y:e,attrs:b});a=this.Hd({x:d,y:f,attrs:a});return[g,a]}var h=Math.max(a.Zo,b.Zo),k=Math.max(a.Ky,b.Ky);a=a.Lc(void 0,h,k);h=b.Lc(void 0,h,k);b=Pu(this);k=Pu(this);for(var l=a.head,n=h.head;l||
n;){if(l&&0===l.type||n&&0===n.type){l=a.Ow();n=h.Ow();const v=b.Ow(),w=k.Ow();for(var p=l.head,q=n.head;p||q;){if(p&&0===p.type||q&&0===q.type){p=l.ut();q=n.ut();for(g of aqb(p,q)){p=l.attrs[g];q=n.attrs[g];p&&q?(oa(this.Qz(g,p.o,q.o)),p=[void 0,{o:q.n,n:p.n}]):p=[q,p];const [x,z]=p;v.Pl(g,z);w.Pl(g,x)}}else if(p&&q)p=Math.min(p.length,q.length),l.Fm(p),n.Fm(p),v.pC(p),w.pC(p);else if(p)p=p.length,l.Fm(p),v.pC(p),w.pC(p);else if(q)p=q.length,n.Fm(p),v.pC(p),w.pC(p);else throw Error();p=l.head;q=
n.head}l.finish();n.finish();v.finish();w.finish()}else if(l&&n)l=Math.min(l.length,n.length),Qu(a,l),Qu(h,l),b.rows(l),k.rows(l);else if(l)l=l.length,Qu(a,l),b.rows(l),k.rows(l);else if(n)l=n.length,Qu(h,l),b.rows(l),k.rows(l);else throw Error();l=a.head;n=h.head}a.finish();h.finish();g=this.Hd({x:c,y:e,attrs:k.build()});a=this.Hd({x:d,y:f,attrs:b.build()});return[g,a]}Zj(a){a=a.attrs.Lc();const b=Pu(this);for(var c=a.head;c;){if(0===c.type){c=a.Ow();const e=b.Ow();for(var d=c.head;d;){if(0===d.type){d=
c.ut();for(const f of Vu(d))d=c.attrs[f],e.Pl(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Fm(d),e.pC(d);d=c.head}c.finish();e.finish()}else c=c.length,Qu(a,c),b.rows(c);c=a.head}return this.Hd({attrs:b.build()})}nj(a,b){return Su.nj(a.x,b.x)&&Su.nj(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:Su.Jf().build(),y:Su.Jf().build(),attrs:Pu(this).build()}}apply(a,b){a=this.wCa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=this.Xg();Ru(a,b.attrs,c,(d,e,f)=>this.ICd(d,e,f));return c.build()}Nj(a,
b){if(b.attrs.items.isEmpty())return this.wCa("unapply",a,b.x,b.y);const c=this.Xg();Ru(a,b.attrs,c,(d,e,f)=>this.GJe(d,e,f));return this.wCa("unapply",c.build(),b.x,b.y)}Ah(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof xub?this.Qz===a.Qz:!1}constructor(a){super();this.Qz=a;this.sgd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.Qz(b,c.o,d.o)&&this.Qz(b,e,f)}return!c&&!d};this.ICd=(b,c,d)=>null!=d?(oa(this.Qz(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.GJe=
(b,c,d)=>null!=d?(oa(this.Qz(b,c,d.n)),d.o):c}};
zub=class{isEmpty(){return!this.items.length}Lc(a){return new yub(this.items,this.length,a)}forEach(a,{grad:b,rc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.Lc();a=a.Lc();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(0!==e.type)return!1;d=c.ut();e=a.ut();if(null!=d?null==
e||!b(d,e):null!=e)return!1;break;case 1:if(1!==e.type||d.length!==e.length)return!1;c.Fm(d.length);a.Fm(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.Aub=new zub([],0);
yub=class{get head(){return this.Sk}Fm(a){var b=this.Sk;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Sk=a<b?dqb(b-a):this.input[this.i++];return a}ut(){const a=this.Sk;if(a&&1!==a.type)return this.Sk=this.input[this.i++],a.value}finish(){oa(null==this.Sk,"stream not empty: {}",this.Sk)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,dqb(c)]:a;this.Sk=this.input.length?this.input[this.i++]:void 0}};
Tu=__c.Tu=class{grad(a){if(null==a)return this;oa(null==this.tla,"nextGrad already set: {}",this.tla);this.tla=a;return this}rc(a){if(0>=a)return this;null!=this.tla&&(this.sla&&(this.items.push(dqb(this.sla)),this.sla=0),this.items.push({type:0,value:this.tla}),this.tla=void 0);this.sla+=a;this.D_+=a;return this}build(){null!=this.tla?(oa(0!==this.sla),this.items.push(dqb(this.sla)),this.items.push({type:0,value:this.tla}),this.sla=0,this.tla=void 0):this.D_-=this.sla;return new zub(this.items,this.D_)}constructor(){this.items=
[];this.sla=this.D_=0;this.tla=void 0}};
Uu=__c.Uu=class{static of(a,b,c,d){return b.isEmpty()?wub:new Uu(a,b,c,d)}Lc(a=()=>!0,b=0,c=0){b=Math.max(this.Zo,b);c=Math.max(this.Ky,c);const d=this.items.Lc(c);return new Bub(this.Qz,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.Lc(a,c,d);c=a.head;let e=0;for(;c;)e=0!==c.type&&a.yie?e+Qu(a,c.length):e+a.IVb((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.Ow;this.items.forEach(this.items.length,{rc:a.rows,grad:c=>{const {pC:d,grad:e,W5a:f}=b();c.forEach(c.length,{rc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof Uu&&this.Ky===a.Ky&&this.Zo===a.Zo?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>iqb(this.Qz,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",Zpb))}constructor(a,b,c,d){this.Qz=a;this.items=b;this.Zo=c;this.Ky=d}};wub=new Uu((a,b,c)=>b===c,__c.Aub,0,0);
Bub=class{get head(){return this.uOa.head}IVb(a){oa(null==this.AT);const b=this.Ow();var c=b.head;let d=0;for(;c;){if(0===c.type)b.ut();else{c=b.Fm(c.length);if(!Wu(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?Qu(this,1):0}get yie(){oa(null!=this.head);oa(null==this.AT);return 1===this.head.type&&this.qz.isEmpty()}Ow(){oa(null==this.AT);var a=this.uOa.ut();if(a){a=a.Lc(this.Zo);for(var b=this.qz.Lc(this.Zo),c=new Tu,d=a.head,e=b.head;d||e;){if(d&&
0===d.type||e&&0===e.type){const g=a.ut(),h=b.ut();b:{d=this.vAa;e=this.Nka;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];na(eqb(d,f,null===h||void 0===h?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Wu(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Fm(d),b.Fm(d),c.rc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.qz;this.AT=f;return new Cub(this.vAa,this.Nka,this.AT.Lc(this.Zo),this.mec)}finish(){oa(null==
this.AT);this.uOa.finish()}constructor(a,b,c,d,e){this.vAa=a;this.uOa=b;this.Nka=c;this.Zo=d;this.Ky=e;this.qz=__c.Aub;this.AT=void 0;this.mec=()=>{oa(null!=this.AT);this.qz=this.AT;this.AT=void 0}}};
$pb=class{Ow(){oa(null==this.rhb);return this.rhb=new Dub(this.Qz,this.eKd)}rows(a){this.VYb.rc(a);return this}build(){oa(null==this.rhb);oa(this.qz.isEmpty(),"prevDxs not empty: {}",this.qz);const a=this.VYb.build();return Uu.of(this.Qz,a,this.Zo,a.length)}constructor(a){this.Qz=a;this.VYb=new Tu;this.Zo=0;this.qz=__c.Aub;this.rhb=void 0;this.eKd=b=>{oa(null!=this.rhb);this.Zo=Math.max(this.Zo,b.length);var c=this.qz.Lc(this.Zo);const d=b.Lc(this.Zo),e=new Tu;for(var f=c.head,g=d.head;f||g;){if(f&&
0===f.type||g&&0===g.type)f=c.ut(),g=d.ut(),f=__c.hqb(this.Qz,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Fm(f),d.Fm(f),e.rc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.VYb.grad(c);this.qz=b;this.rhb=void 0}}};
Cub=class{get attrs(){return this.nG}get head(){return this.lrb.head}Fm(a){return this.lrb.Fm(a)}ut(){const a=this.lrb.ut();this.oha(a);return a}finish(){this.lrb.finish();this.un()}oha(a){if(a)for(const b in a){if(!this.Nka(b))continue;const c=__c.fqb(this.vAa,b,this.nG[b],a[b]);null==c?delete this.nG[b]:this.nG[b]=c}}constructor(a,b,c,d){this.vAa=a;this.Nka=b;this.lrb=c;this.un=d;this.nG={}}};
Dub=class{Pl(a,b){var c=this.nG[a];(b=(0,this.vAa)(a,c,b)?void 0:{Pb:c,r:b})?(this.mH||(this.mH={}),this.mH[a]=b):this.mH&&(delete this.mH[a],Wu(this.mH)&&(this.mH=void 0));return this}attrs(a){for(const b of Vu(a))this.Pl(b,a[b]);return this}pC(a){if(0>=a)return this;this.oha();this.ura.rc(a);return this}oha(){if(this.mH){var a=this.mH;this.mH=void 0;for(const b in a){const c=__c.fqb(this.vAa,b,this.nG[b],a[b]);null==c?delete this.nG[b]:this.nG[b]=c}this.ura.grad(a)}}finish(){this.oha();oa(Wu(this.nG));
const a=this.ura.build();this.un(a)}constructor(a,b){this.vAa=a;this.un=b;this.nG={};this.mH=void 0;this.ura=new Tu}};var Eub=class extends wv{get Zo(){return this.grid.Zo}get Ky(){return this.grid.Ky}set(a,b,c){const {KDe:d,yDe:e,wsb:f=d,fYd:g=e}=b,h=__c.Iu(this.nh,__c.Mpb(this.nh,a,c)),k=__c.Opb(this.nh,h,(n,p)=>__c.Npb(this.nh,h,p));b=zt(k,()=>{});c=Pu(this.domain);c.rows(d);for(var l=d;l<=f;l++){const n=c.Ow();n.pC(e);for(let p=e;p<=g;p++){const q=this.grid.get(l,p),v={};__c.Hu(this.nh,k,a,(w,x)=>{v[x]={o:q&&q[x],n:k[x]}});n.attrs(v);n.pC(1)}n.attrs(b);n.finish();c.rows(1)}a=c.Ow();a.pC(e);for(l=e;l<=g;l++)a.attrs(b),
a.pC(1);a.attrs(b);a.finish();a=this.domain.Hd({attrs:c.build()});this.Mp(a)}write(a,b,c){null==c||0===Object.keys(c).length?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(null!=b&&(a=__c.Mpb(this.nh,a,b),0!==Object.keys(a).length))return a}Xb(){const a=this.domain.Xg();for(let b=0;b<=this.Ky;b++){const c=a.Ow();let d={};for(let e=0;e<=this.Zo;e++){const f=this.grid.get(b,e);for(const g of lqb(d,f))c.Pl(g,f&&f[g]);d=f;c.pC(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=
this.Xb();oa(this.domain.Ah(b,a))}zi(a){const b=this.Xb(),c=Pu(this.domain);Ru(b,a,c,(d,e,f)=>null==e&&null==f?void 0:{o:e,n:f});this.Mp(this.domain.Hd({attrs:c.build()}));return!0}PW(a){this.vRb(a.x);this.wRb(a.y);kqb(this,a.attrs)}vRb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.Lc();for(var c=a.head;c;)0===c.type?b+=a.Gx(c.length):(c=Nu(a,c.length),Bob(this.grid,b,c),b+=c),c=a.head}}wRb(a){let b=0;a=a.Lc();for(var c=a.head;c;)0===c.type?b+=a.Gx(c.length):(c=Nu(a,c.length),Cob(this.grid,b,c),b+=c),
c=a.head}constructor(a,b,c){super();this.nh=a;this.domain=b;this.grid=new xrb;c.forEach(a.BB,(d,e,f)=>{0===Object.keys(f).length||this.grid.set(d,e,f)});a=this.Xb();oa(c.equals(a))}},Fub=class extends vrb{Xg(){return this.domain.Xg()}Jx(a){return new Eub(this.nh,this.domain,a)}Ol(a){return a}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(){var a=__c.ew;super();this.nh=a;this.domain=new xub(a.txa)}};__c.Iub=class{get Zo(){return this.grid.Zo}get Ky(){return this.grid.Ky}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Xu(b,c,d.right,d.bottom))})}map(a){const b=new Gub;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(null!=c&&(c=c.cells[a],null!=c))return __c.mqb(Xu(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.mqb(c,b))});return a}Lc(){return this.grid.Lc()}constructor(a){this.grid=
a}};__c.Iub.prototype.x7b=ea(151);
var Gub=class{add(a,b){av(this.GJd,a);this.t$c.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.t$c.build();return a.isEmpty?Jub:new __c.Iub(a)}constructor(){this.t$c=new Kub;this.GJd=new Lub}},Mub=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},Nub=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Zu=class{add(a,b,c){if(null==
c)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Xu(a,b,c.bounds.o.right,c.bounds.o.bottom);av(this.k1c,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Xu(a,b,c.bounds.n.right,c.bounds.n.bottom),av(this.I0c,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.GQa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Xu(a,b,c.o.right,c.o.bottom),av(this.k1c,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Xu(a,b,c.n.right,c.n.bottom),av(this.I0c,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.GQa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.GQa.build()}constructor(){this.GQa=new Kub;this.k1c=new Lub;this.I0c=new Lub}},Pub=class{get isEmpty(){return 0===this.rows.length}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}Lc(){return new Oub(this.rows)}constructor(a,b,c){this.rows=
a;this.Zo=b;this.Ky=c}},Oub=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}Sy(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;nqb(this);null==b.cells[this.x]&&(this.y++,this.x=0,oqb(this),nqb(this));return a}finish(){oa(null==this.head)}constructor(a){this.rows=a;this.x=this.y=0;oqb(this);nqb(this)}},Kub=class{add(a,b,c,d,e){na(a<=c);na(b<=d);null==this.t3||this.t3.y<b?(this.flush(),this.rows.length&&oa(this.rows.length<=b),this.t3=
{y:b,bac:d,cells:[]},this.t3.cells[a]=e):this.t3.y===b?(oa(this.t3.cells.length<=a),this.t3.bac=Math.max(this.t3.bac,d),this.t3.cells[a]=e):oa(this.t3.y>b);this.Zo=Math.max(this.Zo,c+1);this.Ky=Math.max(this.Ky,d+1);return this}flush(){if(this.t3){const {y:a,...b}=this.t3;this.rows[a]=b;this.t3=void 0}}build(){this.flush();return new Pub(this.rows,this.Zo,this.Ky)}constructor(){this.rows=[];this.Ky=this.Zo=0}},Jub=new __c.Iub(new Pub([],0,0)),Qub=class extends sv{Xg(){return new Gub}Yz(){return Jub}replace(a,
b){return new Mub(a,b)}update(a,b){a=null==a||Yu(a.o,a.n)?void 0:a;b=null==b||this.component.isIdentity(b)?void 0:b;return null!=a||null!=b?new Nub(a,b):void 0}Hd(a={}){const b=a.cells||(new Zu).build();return{x:a.x||Su.Jf().build(),y:a.y||Su.Jf().build(),cells:b,i1:a.i1||fw.project(b)}}isIdentity(a){return Su.isIdentity(a.x)&&Su.isIdentity(a.y)&&a.cells.isEmpty&&fw.isIdentity(a.i1)}compose(a,b){const c=pqb(this,a.cells,b.x,b.y),d=fw.expand(a.i1,b.x,b.y);return{x:Su.compose(a.x,b.x),y:Su.compose(a.y,
b.y),cells:sqb(this,c,b.cells),i1:fw.compose(d,b.i1)}}transform(a,b){const [c,d]=Su.transform(a.x,b.x),[e,f]=Su.transform(a.y,b.y),g=pqb(this,a.cells,c,e),h=pqb(this,b.cells,d,f);a=fw.expand(a.i1,c,e);b=fw.expand(b.i1,d,f);const [k,l]=fw.transform(a,b),n=new Lub,p=fw.cursor(a,Math.max(g.Zo,h.Zo),Math.max(g.Ky,h.Ky)),q=new Zu,v=new Zu;qqb(g.Lc(),h.Lc(),(w,x,z,B)=>{if(null!=z||null!=B){a:if(null==z||null==B)z=[B,z];else switch(z.type){case 1:b:switch(B.type){case 1:const [I,K]=z.delta&&B.delta?this.component.transform(z.delta,
B.delta):[B.delta,z.delta];if(z.bounds&&B.bounds){z=z.bounds;B=B.bounds;oa(Yu(z.o,B.o));const T={right:Math.min(z.n.right,B.n.right),bottom:Math.min(z.n.bottom,B.n.bottom)};z=[{o:z.n,n:T},{o:B.n,n:T}]}else z=[B.bounds,z.bounds];const [N,P]=z;z=[this.update(N,I),this.update(P,K)];break b;case 0:oa(null!=B.o);z.bounds&&oa(Yu(z.bounds.o,B.o));z=[this.replace({...(z.bounds?z.bounds.n:B.o),state:z.delta?this.component.apply(B.o.state,z.delta):B.o.state},B.n),void 0];break b;default:throw new r(B);}break a;
case 0:b:switch(B.type){case 1:oa(null!=z.o);B.bounds&&oa(Yu(z.o,B.bounds.o));z=[void 0,this.replace({...(B.bounds?B.bounds.n:z.o),state:B.delta?this.component.apply(z.o.state,B.delta):z.o.state},z.n)];break b;case 0:oa($u(this,z.o,B.o));z=[void 0,this.replace(B.n,z.n)];break b;default:throw new r(B);}break a;default:throw new r(z);}var [C,F]=z;z=C&&vqb(this,w,x,C,n,p);(C||z)&&v.add(w,x,rqb(this,C,z));(F||z)&&q.add(w,x,rqb(this,F,z))}});p.finish();return[{x:c,y:e,cells:v.build(),i1:k},{x:d,y:f,cells:q.build(),
i1:l}]}Zj(a){const b=new Zu;a.cells.forEach((d,e,f)=>{if(null!=f)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Zj(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:Su.Zj(a.x),y:Su.Zj(a.y),cells:c,i1:fw.project(c)}}nj(a,b){var c;if(c=Su.nj(a.x,b.x)&&Su.nj(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Zo!==d.Zo||c.Ky!==d.Ky)c=!1;else{c=c.Lc();d=d.Lc();for(var e=c.head,f=d.head;e||
f;){var g;(g=null==e)||(g=null==f)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(null==e||null==f?e===f:0===e.type&&0===f.type?$u(this,e.o,f.o)&&$u(this,e.n,f.n):1===e.type&&1===f.type&&(e.bounds&&f.bounds?Yu(e.bounds.o,f.bounds.o)&&Yu(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&f.delta?this.component.nj(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.Sy();d.Sy();e=c.head;f=d.head}c=!0}}return c&&fw.nj(a.i1,b.i1)}identity(){return this.Hd()}apply(a,b){a=this.wCa(a,
b.x,b.y);const c=this.Xg();qqb(a.Lc(),b.cells.Lc(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)oa(null!=f),c.add(Xu(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:oa(null!=f);g.bounds&&oa(Yu(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,g.delta):f.state);break;case 0:g.o&&(oa(null!=f),oa($u(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}wCa(a,b,c){if(Su.isIdentity(b)&&
Su.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Ou(b,d),g=Ou(c,e),h=new Gub;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Nj(a,b){const c=this.Xg();qqb(a.Lc(),b.cells.Lc(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)oa(null!=f),c.add(Xu(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:oa(null!=f);g.bounds&&
oa(Yu(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Nj(f.state,g.delta):f.state);break;case 0:g.n&&(oa(null!=f),oa($u(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.rJb(c.build(),b.x,b.y)}rJb(a,b,c){if(Su.isIdentity(b)&&Su.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Ypb(b,d),g=Ypb(c,e),
h=new Gub;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Ah(a,b){a=a.Lc();b=b.Lc();let c=a.head,d=b.head;for(;c||d;){if(null==c||null==d||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||c.value.right!==d.value.right||!this.component.Ah(c.value.state,d.value.state))return!1;a.Sy();b.Sy();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Qub&&this.component.equals(a.component)}constructor(a){super();
this.component=a}},Lub=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){oa(!this.readBuffer(c,b));const {Rkd:d,Ukd:e}=xqb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {Rkd:c,Ukd:d}=xqb(this,a,b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.EKa=this.Yoa=0}},Rub=class extends sv{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=
this.K0a.Xg();Ru(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return[b,a]}Zj(a){return a}nj(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Nj(a){return a}Ah(a,b){return a===b}equals(a){return this===a||a instanceof Rub}Jf(){return new Sub(()=>this.K0a.Xg(),a=>Snb(this,a))}cursor(a,b,c){return new Tub(a,b,c)}project(a){const b=this.Jf();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Xu(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Xu(c,d,e.n.right,
e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.K0a.Hd({x:yqb(b),y:yqb(c)});return this.K0a.apply(a,b)}constructor(){super();this.K0a=new xub((a,b,c)=>b===c);this.id=this.K0a.Xg().build()}},Sub=class{add(a){const b=this.GQa(),c=2*a.left,d=2*a.top,e=2*a.right;a=2*a.bottom;b.rows(d);b.Ow().pC(c).attrs({value:!0}).pC(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.Ow().pC(c).attrs({value:void 0}).pC(e-c+1).attrs({value:void 0}).finish();this.OJ.push(b.build());
return this}build(){return this.OJ.length?this.reduce(this.OJ):this.GQa().build()}constructor(a,b){this.GQa=a;this.reduce=b;this.OJ=[]}},Tub=class{get yi(){oa(0===this.aha%2);return this.aha/2}Ow(){oa(0===this.Tya);this.$P=this.Lc.Ow();return this}get value(){oa(null!=this.$P);return this.$P.attrs.value}IVb(a){oa(null!=this.$P);for(var b=this.$P.head;null!=b;){if(0===b.type)this.$P.ut();else if(b=this.$P.Fm(b.length),0===this.aha%2&&this.$P.attrs.value)for(let c=0;c<b;c++)0===this.Tya%2&&a(this.Tya/
2,this.aha/2),this.Tya++;else this.Tya+=b;b=this.$P.head}return this}W5a(){for(oa(null!=this.$P);this.$P.head;)0===this.$P.head.type?this.$P.ut():this.$P.Fm(this.$P.head.length);this.$P.finish();this.$P=void 0;this.Tya=0;return this}finish(){tqb(this,this.Lc.Ky);this.Lc.head&&(this.Ow(),this.W5a());this.Lc.finish()}constructor(a,b,c){this.Tya=this.aha=0;this.Lc=a.Lc(void 0,2*b,2*c)}},fw=new Rub;var Wub=class extends wv{get(a,b){a=this.grid.get(a,b);if(null!=a)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.tEa.left===d&&b.tEa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Zu).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.Mp(this.domain.compose(zqb(this,a),this.domain.Hd({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.Mp(zqb(this,a))}createRef(a,b){var c=this.grid;var d={left:Aob(this.grid,b.left),top:zob(this.grid,
b.top),right:Aob(this.grid,b.right),bottom:zob(this.grid,b.bottom)};c=new Uub(c,d);d=Nt(this,Aqb(this,c));const {mutable:e,Lv:f}=Ot(this.type,a,d);a=new Vub(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}bYb(a,b,c){oa(a.span.left===c.left);oa(a.span.top===c.top);oa(a.span.right===c.right);oa(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)oa(this.grid.get(d,e)===a),this.grid.delete(d,e);Pt(this.type,b,a.to,a.value)}PW(a){this.vRb(a.x);
this.wRb(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){oa(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;oa(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)oa(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=h.bottom;g++)oa(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.tEa.right=Aob(this.grid,d);e.tEa.bottom=zob(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),oa(e.span.left===b&&e.span.top===c),oa(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.bYb(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)oa(null==this.grid.get(e,h)),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)oa(null==this.grid.get(f,b)),this.grid.set(f,b,g);g.tEa.right=Aob(this.grid,d.right);g.tEa.bottom=zob(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}vRb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.Lc();for(var c=a.head;c;)0===c.type?b+=a.Gx(c.length):
(c=Nu(a,c.length),Bob(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}wRb(a){let b=0;a=a.Lc();for(var c=a.head;c;)0===c.type?b+=a.Gx(c.length):(c=Nu(a,c.length),Cob(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}Xb(){const a=this.domain.Xg();for(let b=0;b<this.grid.Ky;b++)for(let c=0;c<this.grid.Zo;c++){const d=this.grid.get(b,c);null!=d&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.Xb(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.Ky;d++)for(let e=
0;e<this.grid.Zo;e++){const f=this.grid.get(d,e);if(null==f||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));oa(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}oa(c===b)}zi(a){const b=new Zu,c=new Zu;for(let d=0;d<this.grid.Ky;d++)for(let e=0;e<this.grid.Zo;e++){const f=this.grid.get(d,e);null!=f&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.Xb(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.Mp(this.domain.compose(this.domain.Hd({cells:b.build()}),this.domain.Hd({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new xrb;c.forEach((d,e)=>{this.createRef(d,e)})}},Vub=class{get span(){return this.tEa.R3c.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.tEa=d}},Uub=class{get right(){return this.ryc.get()}set right(a){this.ryc.set(a)}get bottom(){return this.$xc.get()}set bottom(a){this.$xc.set(a)}constructor(a,
b){this.Wvb=a;this.R3c=ov(()=>({left:m(this.Wvb.aVb.get(this.left)),top:m(this.Wvb.rkc.get(this.top)),right:m(this.Wvb.aVb.get(this.right)),bottom:m(this.Wvb.rkc.get(this.bottom))}),{equals:__c.Rqb.structural});this.left=b.left;this.top=b.top;this.ryc=new xv(b.right);this.$xc=new xv(b.bottom)}},Xub=class extends vv{Jx(a){return new Wub(this.type,this.domain,a)}Ol(a){return a}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){return this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(a){super(uv,
uv);this.type=a;this.domain=new Qub(this.type.domain)}};var Yub,Zub,bv,dv,gw,$ub,avb,bvb;Yub=new Map;Zub=class{ordinal(a,b){null!=b?this.O_a.set(a,b):this.O_a.delete(a);return this}Ok(a){a.forEach((b,c)=>this.O_a.set(c,b));return this}build(){return this.O_a.size?this.O_a:Yub}constructor(){this.O_a=new Map}};bv=class{toString(){var a,b;return`R(${null!==(a=this.oldValue)&&void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
dv=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};gw=class{static create(a,b){b=b.size?b:$ub.Ok;return b!==$ub.Ok||a!==$ub.axis?new gw(a,b):$ub}toString(){const a=[...this.Ok].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Ok=b}};$ub=new gw(Su.Jf().build(),new Map);
avb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return gw.create(this.axis.build(),this.Ok)}constructor(){this.Ok=new Map;this.axis=Su.Jf()}};
bvb=class extends sv{Xg(){return new Zub}Jf(){return new avb}replace(a,b,c){return cv(this.Jf(),a,b,c).build()}update(a,b,c){return Bqb(this.Jf(),a,b,c).build()}Hd(a,b){return gw.create(a,b)}isIdentity(a){return Su.isIdentity(a.axis)&&!a.Ok.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=Dqb(a.Ok,b.axis),d=new Map;for(const h of Cqb(c,b.Ok)){var e=c.get(h);const k=b.Ok.get(h);if(e&&k){var f=d,g=f.set;a:switch(ra(e.newValue,k.oldValue),e.type){case 0:e=new bv(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new bv(e.oldValue,k.newValue);break a;case 1:e=new dv(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return gw.create(Su.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const [c,d]=Su.transform(a.axis,b.axis);a=Dqb(a.Ok,c);const e=Dqb(b.Ok,d);b=new Map;const f=new Map;for(var g of Cqb(a,e)){var h=a.get(g);const k=e.get(g);if(h&&
k){a:switch(ra(h.oldValue,k.oldValue),h.type){case 0:switch(k.type){case 0:h=[void 0,new bv(k.newValue,h.newValue)];break a;case 1:h=[void 0,new bv(k.newValue,h.newValue)];break a;default:throw new r(k);}case 1:switch(k.type){case 0:h=[new bv(h.newValue,k.newValue),void 0];break a;case 1:h=[void 0,new dv(k.newValue,h.newValue)];break a;default:throw new r(k);}default:throw new r(h);}const [l,n]=h;n&&b.set(g,n);l&&f.set(g,l)}else h?b.set(g,h):k&&f.set(g,k)}g=gw.create(c,f);a=gw.create(d,b);return[g,
a]}Zj(a){const b=0===a.Ok.size?a.Ok:Eh(a.Ok,c=>{switch(c.type){case 0:return new bv(c.newValue,c.oldValue);case 1:return new dv(c.newValue,c.oldValue);default:throw new r(c);}});return gw.create(Su.Zj(a.axis),b)}nj(a,b){if(a===b)return!0;if(!Su.nj(a.axis,b.axis)||a.Ok.size!==b.Ok.size)return!1;for(const e of a.Ok.keys()){var c=a.Ok.get(e),d=b.Ok.get(e);if(c!==d&&(null==c||null==d||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return $ub}apply(a,b){if(this.isIdentity(b)||
!a.size&&!b.Ok.size)return a;a=this.wCa(a,b.axis);if(!b.Ok.size)return a;const c=new Map(a);for(const [d,e]of b.Ok)b=a.get(d),ra(b,e.oldValue),null!=e.newValue?c.set(d,e.newValue):c.delete(d);return c}wCa(a,b){if(Su.isIdentity(b))return a;const c=new Set(a.values()),d=Ou(b,c);return Eh(a,e=>m(d.get(e)))}Nj(a,b){if(this.isIdentity(b)||!a.size&&!b.Ok.size)return a;if(!b.Ok.size)return this.rJb(a,b.axis);const c=new Map(a);for(const [d,e]of b.Ok){const f=a.get(d);ra(f,e.newValue);null!=e.oldValue?c.set(d,
e.oldValue):c.delete(d)}return this.rJb(c,b.axis)}rJb(a,b){if(Su.isIdentity(b))return a;const c=new Set(a.values()),d=Ypb(b,c);return Eh(a,e=>m(d.get(e)))}Ah(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof bvb}constructor(){super();this.Yz=Yub}};gv=__c.gv=new bvb;var cvb=new Map,fv=class{static from(a){if(a instanceof fv)return a;if(Array.isArray(a)){const [b,c]=a;return new fv(b,c)}return new fv(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},dvb=class{range(a,b){b?this.w5.set(a,b):this.w5.delete(a);return this}Je(a){a.forEach((b,c)=>this.w5.set(c,b));return this}build(){return this.w5.size?this.w5:cvb}constructor(){this.w5=new Map}},Iqb=class{toString(){var a,b;return`R(${null!==(a=this.oldValue)&&
void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},hv=class{static from(a){if(a instanceof hv)return a;if(Array.isArray(a)){const [b,c]=a;return new hv(b,c)}return new hv(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},Jqb=class{toString(){var a,b;return`U(${null!==(a=this.start)&&void 0!==a?a:"_"},${null!==(b=this.end)&&void 0!==b?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},iv=class{static create(a,b){b=b.size?b:evb.Je;return b!==evb.Je||a!==evb.axis?new iv(a,b):evb}toString(){return`{${this.axis}|${[...this.Je].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Je=b}},evb=new iv(Su.Jf().build(),new Map),fvb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}HVa(a,b,c){this.Je.set(a,new Iqb(b&&fv.from(b),c&&fv.from(c)));return this}createRange(a,
b){return this.HVa(a,void 0,b)}build(){return iv.create(this.axis.build(),this.Je)}constructor(){this.Je=new Map;this.axis=Su.Jf()}},hw,gvb;oa(!0);hw=gv.map(Kqb,Hqb,Gqb,Fqb);
gvb=class extends sv{Xg(){return new dvb}Jf(){return new fvb}replace(a,b,c){return this.Jf().HVa(a,b,c).build()}update(a,b,c){var d=this.Jf();d.Je.set(a,new Jqb(b&&hv.from(b),c&&hv.from(c)));return d.build()}Hd(a,b){return iv.create(a,b)}isIdentity(a){return hw.isIdentity(a)}compose(a,b){return hw.compose(a,b)}transform(a,b){return hw.transform(a,b)}Zj(a){return hw.Zj(a)}nj(a,b){return hw.nj(a,b)}identity(a){return hw.identity(a)}apply(a,b){return hw.apply(a,b)}Nj(a,b){return hw.Nj(a,b)}Ah(a,b){return hw.Ah(a,
b)}equals(a){return hw.equals(a)}constructor(){super();this.Yz=cvb}};iw=__c.iw=new gvb;var hvb=class extends sv{Hd(a){return{rows:a.rows||this.rows.Jf().build(),cols:a.cols||this.cols.Jf().build(),xr:a.xr||iw.Jf().build().Je,wr:a.wr||gv.Jf().build().Ok,Wq:a.Wq||iw.Jf().build().Je,Vq:a.Vq||gv.Jf().build().Ok,cells:a.cells||kv(this.cells.Hd({}),this.cols.Jf().build(),this.rows.Jf().build()),attrs:a.attrs||kv(this.attrs.Hd({}),this.cols.Jf().build(),this.rows.Jf().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&iw.isIdentity(iw.Hd(Su.identity(),
a.xr))&&gv.isIdentity(gv.Hd(Su.identity(),a.wr))&&iw.isIdentity(iw.Hd(Su.identity(),a.Wq))&&gv.isIdentity(gv.Hd(Su.identity(),a.Vq))&&this.attrs.isIdentity(this.attrs.Hd(a.attrs))&&this.cells.isIdentity(this.cells.Hd(a.cells))&&this.attrs.isIdentity(this.attrs.Hd(a.attrs))}compose(a,b){const c=jv(a.cols),d=jv(a.rows),e=jv(b.cols),f=jv(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=iw.compose(iw.Hd(d,a.xr),iw.Hd(f,b.xr)).Je,l=gv.compose(gv.Hd(d,a.wr),gv.Hd(f,b.wr)).Ok,
n=iw.compose(iw.Hd(c,a.Wq),iw.Hd(e,b.Wq)).Je,p=gv.compose(gv.Hd(c,a.Vq),gv.Hd(e,b.Vq)).Ok,q=this.cells.compose(this.cells.Hd({...a.cells,x:c,y:d}),this.cells.Hd({...b.cells,x:e,y:f}));a=this.attrs.compose(this.attrs.Hd({...a.attrs,x:c,y:d}),this.attrs.Hd({...b.attrs,x:e,y:f}));return{rows:g,cols:h,xr:k,wr:l,Wq:n,Vq:p,cells:kv(q,h,g),attrs:kv(a,h,g)}}transform(a,b){const c=jv(a.cols),d=jv(a.rows),e=jv(b.cols),f=jv(b.rows),[g,h]=this.rows.transform(a.rows,b.rows),[k,l]=this.cols.transform(a.cols,b.cols),
[{Je:n},{Je:p}]=iw.transform(iw.Hd(d,a.xr),iw.Hd(f,b.xr)),[{Ok:q},{Ok:v}]=gv.transform(gv.Hd(d,a.wr),gv.Hd(f,b.wr)),[{Je:w},{Je:x}]=iw.transform(iw.Hd(c,a.Wq),iw.Hd(e,b.Wq)),[{Ok:z},{Ok:B}]=gv.transform(gv.Hd(c,a.Vq),gv.Hd(e,b.Vq)),[C,F]=this.cells.transform(this.cells.Hd({...a.cells,x:c,y:d}),this.cells.Hd({...b.cells,x:e,y:f})),[I,K]=this.attrs.transform(this.attrs.Hd({...a.attrs,x:c,y:d}),this.attrs.Hd({...b.attrs,x:e,y:f}));a={rows:g,cols:k,xr:n,wr:q,Wq:w,Vq:z,cells:kv(C,k,g),attrs:kv(I,k,g)};
b={rows:h,cols:l,xr:p,wr:v,Wq:x,Vq:B,cells:kv(F,l,h),attrs:kv(K,l,h)};return[a,b]}Zj(a){const b=jv(a.cols),c=jv(a.rows),d=this.rows.Zj(a.rows),e=this.cols.Zj(a.cols),f=iw.Zj(iw.Hd(c,a.xr)).Je,g=gv.Zj(gv.Hd(c,a.wr)).Ok,h=iw.Zj(iw.Hd(b,a.Wq)).Je,k=gv.Zj(gv.Hd(b,a.Vq)).Ok,l=this.cells.Zj({...a.cells,x:b,y:c});a=this.attrs.Zj(this.attrs.Hd({...a.attrs,x:b,y:c}));return{rows:d,cols:e,xr:f,wr:g,Wq:h,Vq:k,cells:kv(l,e,d),attrs:kv(a,e,d)}}nj(a,b){return this.rows.nj(a.rows,b.rows)&&this.cols.nj(a.cols,b.cols)&&
iw.nj(iw.Hd(Su.identity(),a.xr),iw.Hd(Su.identity(),b.xr))&&gv.nj(gv.Hd(Su.identity(),a.wr),gv.Hd(Su.identity(),b.wr))&&iw.nj(iw.Hd(Su.identity(),a.Wq),iw.Hd(Su.identity(),b.Wq))&&gv.nj(gv.Hd(Su.identity(),a.Vq),gv.Hd(Su.identity(),b.Vq))&&this.cells.nj(this.cells.Hd(a.cells),this.cells.Hd(b.cells))&&this.attrs.nj(this.attrs.Hd(a.attrs),this.attrs.Hd(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),xr:iw.identity(a.xr).Je,wr:gv.identity(a.wr).Ok,Wq:iw.identity(a.Wq).Je,
Vq:gv.identity(a.Vq).Ok,cells:this.cells.identity(a.cells),attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=jv(b.cols),d=jv(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=iw.apply(a.xr,iw.Hd(d,b.xr)),h=gv.apply(a.wr,gv.Hd(d,b.wr)),k=iw.apply(a.Wq,iw.Hd(c,b.Wq)),l=gv.apply(a.Vq,gv.Hd(c,b.Vq)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.Hd({...b.attrs,x:c,y:d}));return{rows:e,cols:f,xr:g,wr:h,
Wq:k,Vq:l,cells:n,attrs:a}}Nj(a,b){if(this.isIdentity(b))return a;const c=jv(b.cols),d=jv(b.rows),e=this.rows.Nj(a.rows,b.rows),f=this.cols.Nj(a.cols,b.cols),g=iw.Nj(a.xr,iw.Hd(d,b.xr)),h=gv.Nj(a.wr,gv.Hd(d,b.wr)),k=iw.Nj(a.Wq,iw.Hd(c,b.Wq)),l=gv.Nj(a.Vq,gv.Hd(c,b.Vq)),n=this.cells.Nj(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Nj(a.attrs,this.attrs.Hd({...b.attrs,x:c,y:d}));return{rows:e,cols:f,xr:g,wr:h,Wq:k,Vq:l,cells:n,attrs:a}}Ah(a,b){return this.rows.Ah(a.rows,b.rows)&&iw.Ah(a.xr,b.xr)&&gv.Ah(a.wr,
b.wr)&&iw.Ah(a.Wq,b.Wq)&&gv.Ah(a.Vq,b.Vq)&&this.cols.Ah(a.cols,b.cols)&&this.cells.Ah(a.cells,b.cells)&&this.attrs.Ah(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof hvb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var ivb;
ivb=class extends wv{static F(a){M(a,{mWc:ov})}get mWc(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return mv(this,this.refs.get(a))}create(a,b){a=this.domain.replace(a,this.get(a),b);this.Mp(a)}update(a,b){const c=m(mv(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.Mp(a)}delete(a){const b=mv(this,this.refs.get(a));null!=b&&(a=this.domain.replace(a,b,void 0),this.Mp(a))}Xb(){const a=this.domain.Xg();for(const [b,c]of this.refs)a.ordinal(b,mv(this,c));return a.build()}destroy(a){oa(this.refs.size===a.size);
for(const [b,c]of this.refs)oa(a.has(b)),oa(mv(this,c)===a.get(b))}zi(a){const b=this.domain.Jf();for(const [c,d]of this.refs){const e=mv(this,d),f=a.get(c);cv(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||cv(b,c,void 0,d);this.Mp(b.build());return!0}PW(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.Lc();for(var d=b.head;d;)0===d.type?c+=b.Gx(d.length):(d=Nu(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),
d=b.head}for(const [e,f]of a.Ok)switch(f.type){case 0:null!=f.oldValue?(c=m(this.refs.get(e)),a=lv(this,f.oldValue),na(c===a)):na(!this.refs.has(e));null!=f.newValue?this.refs.set(e,lv(this,f.newValue)):this.refs.delete(e);break;case 1:c=m(this.refs.get(e));a=lv(this,f.oldValue);na(c===a);this.refs.set(e,lv(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();ivb.F(this);this.domain=__c.gv;this.items=pv.array([],{deep:!1});this.refs=pv.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,
lv(this,c))}};__c.jvb=class extends vv{Jx(a){return new ivb(a)}Ol(a){return a}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){return this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(){super(uv,Lt);this.domain=__c.gv}};__c.jvb.prototype.nv=ea(130);var kvb=new __c.jvb;var lvb,mvb;
lvb=class{create(a,b){a=ev(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(null==c&&null==d){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.Jf();for(const [e,f]of b)cv(a,e,c.get(e),f);c.Mp(a.build())}}get(a){var b=ev(a);a=this.base.get(b.start);b=this.base.get(b.end);if(null!=a&&null!=b)return{start:a,end:Math.max(a,b)}}delete(a){var b=ev(a);a=this.base;var c=new Set([b.start,b.end]);b=a.domain.Jf();for(const d of c)c=a.get(d),null!=c&&cv(b,d,c);a.Mp(b.build())}constructor(a){this.base=a}};
mvb=kvb.map(Kqb,Hqb,Gqb,Fqb,a=>new lvb(a),a=>a.base);__c.nvb=class extends vrb{Jx(a){a=kvb.Jx(Fqb(a));return new lvb(a)}connect(a,b){return mvb.connect(a,b)}Xb(a){return mvb.Xb(a)}destroy(a,b){return mvb.destroy(a,b)}zi(a,b){return mvb.zi(a,b)}constructor(){super();this.domain=__c.iw}};__c.nvb.prototype.nv=ea(129);var ovb=new __c.nvb;var tvb,rvb,svb,pvb,qvb;
tvb=class extends wv{Xb(){return{rows:this.TEb.Xb(this.rows),cols:this.Gob.Xb(this.cols),xr:iw.Yz,wr:gv.Yz,Wq:iw.Yz,Vq:gv.Yz,cells:this.$nb.Xb(this.cells.grid),attrs:this.rmb.Xb(this.attrs.grid)}}destroy(a){Pt(this.TEb,a.rows,this.Hgd,this.rows);Pt(this.Gob,a.cols,this.ygd,this.cols);Pt(this.$nb,a.cells,this.AIb,this.cells.grid);Pt(this.rmb,a.attrs,this.zIb,this.attrs.grid)}zi(a){return this.TEb.zi(this.rows,a.rows)&&this.Gob.zi(this.cols,a.cols)&&this.$nb.zi(this.cells.grid,a.cells)&&this.rmb.zi(this.attrs.grid,
a.attrs)}PW(a){const b=jv(a.rows),c=jv(a.cols);this.Hgd.next(a.rows);this.ygd.next(a.cols);this.AIb.next(this.domain.cells.Hd({...a.cells,y:b,x:c}));this.zIb.next(this.domain.attrs.Hd({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.TEb=a;this.Gob=b;this.$nb=c;this.rmb=d;this.domain=e;this.P3=g=>this.rows.has(g)?this.rows.CK(g):void 0;this.K0=g=>this.cols.has(g)?this.cols.CK(g):void 0;this.cRa=g=>this.rows.get(g);this.bRa=g=>this.cols.get(g);this.W1d=Nt(this,g=>{const h=jv(g);Su.isIdentity(h)||
(this.AIb.next(this.domain.cells.Hd({y:h})),this.zIb.next(this.domain.attrs.Hd({y:h})),this.FHe.next(gv.Hd(h,new Map)),this.GHe.next(iw.Hd(h,new Map)));return this.domain.Hd({rows:g})});a=Ot(this.TEb,f.rows,this.W1d);this.rows=a.mutable;this.Hgd=a.Lv;this.S1d=Nt(this,g=>{const h=jv(g);Su.isIdentity(h)||(this.AIb.next(this.domain.cells.Hd({x:h})),this.zIb.next(this.domain.attrs.Hd({x:h})),this.yHe.next(gv.Hd(h,new Map)),this.zHe.next(iw.Hd(h,new Map)));return this.domain.Hd({cols:g})});a=Ot(this.Gob,
f.cols,this.S1d);this.cols=a.mutable;this.ygd=a.Lv;this.U1d=Nt(this,g=>{na(Su.isIdentity(g.axis));return this.domain.Hd({wr:g.Ok})});a=Ot(kvb,f.wr,this.U1d);this.wr=new pvb(a.mutable,this.P3,this.cRa);this.FHe=a.Lv;this.V1d=Nt(this,g=>{na(Su.isIdentity(g.axis));return this.domain.Hd({xr:g.Je})});a=Ot(ovb,f.xr,this.V1d);this.xr=new qvb(a.mutable,this.P3,this.cRa);this.GHe=a.Lv;this.Q1d=Nt(this,g=>{na(Su.isIdentity(g.axis));return this.domain.Hd({Vq:g.Ok})});a=Ot(kvb,f.Vq,this.Q1d);this.Vq=new pvb(a.mutable,
this.K0,this.bRa);this.yHe=a.Lv;this.R1d=Nt(this,g=>{na(Su.isIdentity(g.axis));return this.domain.Hd({Wq:g.Je})});a=Ot(ovb,f.Wq,this.R1d);this.Wq=new qvb(a.mutable,this.K0,this.bRa);this.zHe=a.Lv;this.P1d=Nt(this,g=>{na(Su.isIdentity(g.x));na(Su.isIdentity(g.y));return this.domain.Hd({cells:g})});a=Ot(this.$nb,f.cells,this.P1d);this.cells=new rvb(a.mutable,this.P3,this.K0,this.cRa,this.bRa);this.AIb=a.Lv;this.N1d=Nt(this,g=>{na(Su.isIdentity(g.x));na(Su.isIdentity(g.y));return this.domain.Hd({attrs:g})});
f=Ot(this.rmb,f.attrs,this.N1d);this.attrs=new svb(f.mutable,this.P3,this.K0);this.zIb=f.Lv}};
rvb=class{get(a,b){a=this.P3(a);b=this.K0(b);if(null!=a&&null!=b&&(b=this.grid.get(a,b),null!=b))return{span:{Hh:m(Lqb(this,b.span)),ih:m(Mqb(this,b.span)),Ql:m(Nqb(this,b.span)),Wk:m(Oqb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=Lqb(this,c),e=Mqb(this,c);null!=d&&null!=e&&a(b,{Hh:d,ih:e,Ql:m(Nqb(this,c)),Wk:m(Oqb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(Pqb(this,a),b);return m(this.get(a.Hh,a.ih))}delete(a){this.grid.delete(Pqb(this,
a))}constructor(a,b,c,d,e){this.grid=a;this.P3=b;this.K0=c;this.cRa=d;this.bRa=e}};svb=class{get(a,b,c){b=this.P3(b);c=this.K0(c);if(null!=b&&null!=c)return this.grid.get(a,b,c)}set(a,b,c){const d=this.P3(b.Hh),e=this.K0(b.ih),f=this.P3(b.Ql||b.Hh);b=this.K0(b.Wk||b.ih);null!=d&&null!=e&&null!=f&&null!=b&&this.grid.set(a,{KDe:d,yDe:e,wsb:f,fYd:b},c)}constructor(a,b,c){this.grid=a;this.P3=b;this.K0=c}};
pvb=class{get(a){a=this.Ok.get(a);if(null!=a)for(;0<=a;a--){const b=this.Xvb(a);if(b)return b}}create(a,b){b=m(this.Vxb(b));this.Ok.create(a,b)}delete(a){this.Ok.delete(a)}constructor(a,b,c){this.Ok=a;this.Vxb=b;this.Xvb=c}};
qvb=class{get(a){a=this.Je.get(a);if(null!=a){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.Xvb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.Xvb(c);if(d){a=d;break a}}a=void 0}if(null!=b&&null!=a)return{start:b,end:a}}}create(a,b){const c=m(this.Vxb(b.start));b=m(this.Vxb(b.end));this.Je.create(a,{start:c,end:b})}delete(a){this.Je.delete(a)}constructor(a,b,c){this.Je=a;this.Vxb=b;this.Xvb=c}};
__c.xvb=class extends vv{Jx(a){return new tvb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Ol(a){return a}connect(a,b){return this.Ol(a).connect(b)}Xb(a){return this.Ol(a).Xb()}destroy(a,b){this.Ol(a).destroy(b)}zi(a,b){return this.Ol(a).zi(b)}constructor(a){var b=uvb,c=vvb,d=__c.wvb;super(uv,uv);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new hvb(b.domain,c.domain,a.domain,d.domain)}};__c.xvb.prototype.nv=ea(128);var yvb=Ut({Hf:St(Av)}),zvb=Ut({type:Rt(1,2),id:zv,tVa:Wt(/^([A-Z]+|[1-9]\d*)$/),p$:$t(zv),Re:$t(zv)}),Avb,Bvb,Cvb,Dvb,Evb,Fvb,Gvb,Jvb,Kvb,Lvb,Nvb,Pvb,Qvb,Rvb,Svb,Tvb,Uvb,Vvb,Wvb,Xvb,Yvb,Zvb,$vb,awb,bwb,cwb,dwb,ewb,fwb,gwb,iwb,jwb,kwb,mwb,nwb,owb,qwb,rwb,uvb,vvb,swb,twb,uwb,vwb,wwb,xwb,ywb,zwb,Ewb,Fwb,Gwb,Hwb,Iwb;St(zvb);Avb=Ut({type:Rt("canonical"),Wza:zv});Bvb=Ut({type:Rt("invalid"),MDb:zv});Cvb=eu(Ut({type:Rt("formula"),value:__c.Vt({canonical:Avb,invalid:Bvb},a=>a.type)}));
Dvb=eu(Ut({type:Rt("boolean"),value:yv}));Evb=Math.pow(2,-1022);Fvb=eu(Ut({type:Rt("number"),value:Qt(a=>Number.isFinite(a)&&(Math.abs(a)>=Evb||Object.is(a,0)))}));Gvb=eu(Ut({type:Rt("plaintext"),value:zv}));__c.Hvb=fu({attributes:{n6:cu(Ntb)},Sb:{fill:__c.aw}});__c.Ivb=iu(__c.Hvb);Jvb=fu({values:{type:Rt("media")},Sb:{value:__c.Ivb}});Kvb=iu(eu(Ztb));Lvb=fu({values:{type:Rt("mention")},Sb:{value:Kvb}});__c.Mvb=new __c.Yv;Nvb=fu({values:{type:Rt("text2")},attributes:{Rf:au(yvb)},Sb:{value:__c.Mvb}});
__c.Ovb=new __c.Yv;Pvb=fu({values:{type:Rt("text3")},Sb:{value:__c.Ovb}});Qvb={formula:Cvb,boolean:Dvb,number:Fvb,plaintext:Gvb,media:Jvb,mention:Lvb};Rvb=Bu(Qvb,a=>a.type,a=>a.type);Svb=Bu({...Qvb,text2:Nvb},a=>a.type,a=>a.type);Tvb=Bu({...Qvb,text3:Pvb},a=>a.type,a=>a.type);Uvb=Bu({...Qvb,text2:Nvb},a=>a.type,a=>a.type);Vvb=Ut({type:Rt("plain"),format:zv});Wvb=Ut({type:Rt("currency"),format:zv});Xvb=Ut({type:Rt("percentage"),format:zv});Yvb=Ut({type:Rt("date"),format:zv});
Zvb=__c.Vt({plain:Vvb,currency:Wvb,percentage:Xvb,date:Yvb},a=>a.type);$vb=eu(Ut({type:Rt("plain_number"),$k:Vvb}));awb=eu(Ut({type:Rt("currency"),$k:Wvb}));bwb=eu(Ut({type:Rt("percentage"),$k:Xvb}));cwb=eu(Ut({type:Rt("date"),$k:Yvb}));dwb=fu({attributes:{label:Iv},Sb:{fill:__c.aw}});ewb=iu(dwb);fwb=fu({values:{type:Rt("select")},attributes:{$k:cu(Zvb)},Sb:{options:ewb}});gwb=eu(Ut({type:Rt("mention")}));
__c.hwb=Bu({plain_number:$vb,currency:awb,percentage:bwb,date:cwb,select:fwb,mention:gwb},a=>a.type,a=>a.type);iwb=a=>fu({attributes:{ql:__c.Mv},Sb:{content:bu($t(a)),Pc:bu($t(__c.hwb))}});jwb=iwb(Rvb);kwb={static:{fontFamily:cw.fontFamily,fontSize:cw.fontSize,fontWeight:cw.fontWeight,fontStyle:cw.fontStyle,pY:cw.pY,verticalAlign:cw.verticalAlign,color:cw.color,$m:cw.$m,Az:cw.Az,letterSpacing:cw.letterSpacing,lineHeight:cw.lineHeight,direction:cw.direction,HM:cw.HM,cP:cw.cP},vOa:{},Ys:{}};
__c.lwb=__c.Vpb(kwb);mwb={dnb:Ku("block",At(drb,rv),"inherit"),cnb:Ku("block",At(drb,rv),"inherit"),fnb:Ku("block",At(drb,rv),"inherit"),enb:Ku("block",At(drb,rv),"inherit"),nMa:Ku("block",At(qv,rv),"inherit"),mMa:Ku("block",At(qv,rv),"inherit"),pMa:Ku("block",At(qv,rv),"inherit"),oMa:Ku("block",At(qv,rv),"inherit"),Ymb:Ku("block",At(frb,rv),"inherit"),Xmb:Ku("block",At(frb,rv),"inherit"),$mb:Ku("block",At(frb,rv),"inherit"),Zmb:Ku("block",At(frb,rv),"inherit")};nwb=["auto",...mub];
owb={static:{...kwb.static,kba:Ku("block",At(qv,/^transparent$/),"#ffffff"),...mwb,textAlign:Lu("block",nwb),FD:Lu("block",["overflow","wrap","clip"]),Tk:Lu("block",["start","middle","end"])},vOa:{},Ys:{}};__c.ew=__c.Vpb(owb);__c.wvb=new Fub;__c.pwb=__c.wvb.domain.Yz();qwb=fu({values:{id:zv},attributes:{height:Qrb,minHeight:__c.Lv}});rwb=fu({values:{id:zv},attributes:{width:Qrb}});iu(qwb);iu(rwb);uvb=new __c.hu(qwb,uob(qwb.Yna));vvb=new __c.hu(rwb,uob(rwb.Yna));swb=fu({values:{SEb:zv,RJd:zv,KTd:yv}});
twb=__c.du(swb);uwb=iwb(Svb);vwb=iwb(Tvb);wwb=iwb(Uvb);xwb=new Xub(uwb);ywb=new Xub(vwb);zwb=new Xub(wwb);__c.Awb=(new Xub(jwb)).domain.Yz();__c.Bwb=new __c.xvb(xwb);__c.Cwb=new __c.xvb(ywb);__c.Dwb=new __c.xvb(zwb);Ewb=a=>fu({Sb:{lw:a,Uz:twb,wt:__c.bw},attributes:{direction:au(Rt("ltr","rtl")),oK:Jv}});Fwb=Ewb(__c.Bwb);Gwb=Ewb(__c.Cwb);Hwb=Ewb(__c.Dwb);__c.Jwb=Fwb.map(a=>a,a=>a,a=>a,a=>a,a=>new Iwb(a),a=>a.base);__c.Kwb=Gwb.map(a=>a,a=>a,a=>a,a=>a,a=>new Iwb(a),a=>a.base);
__c.Lwb=Hwb.map(a=>a,a=>a,a=>a,a=>a,a=>new Iwb(a),a=>a.base);
Iwb=class{static F(a){M(a,{width:ov,gVb:ov,skc:ov})}get width(){return this.base.lw.cols.reduce((a,b)=>a+b.width,0)}set width(a){oa(0<a);a/=this.width;for(const b of this.base.lw.cols)b.width*=a}get height(){return this.base.lw.rows.reduce((a,b)=>a+b.height,0)}set height(a){oa(0<a);a/=this.height;for(const b of this.base.lw.rows)b.height*=a,b.minHeight=b.height}get cols(){return this.base.lw.cols}get gVb(){const a=new Map;for(const b of this.cols)a.set(b.id,b);return a}get rows(){return this.base.lw.rows}get skc(){const a=
new Map;for(const b of this.rows)a.set(b.id,b);return a}get Uz(){return this.base.Uz}get direction(){return this.base.direction}set direction(a){this.base.direction=a}get wt(){return this.base.wt}get oK(){return this.base.oK}set oK(a){this.base.oK=a}constructor(a){Iwb.F(this);this.base=a;this.layout=this.base.lw;this.hna=Wqb(b=>this.rows.has(b)?(b=this.rows.Rm(b))?this.hna(b)+1:0:-1);this.Vha=Wqb(b=>this.cols.has(b)?(b=this.cols.Rm(b))?this.Vha(b)+1:0:-1);this.Zb=Wqb(b=>(b=this.cols.Rm(b))?this.Zb(b)+
b.width:0);this.dc=Wqb(b=>(b=this.rows.Rm(b))?this.dc(b)+b.height:0)}};
}).call(self, self._fd1e22c0e0516062f8631db29060abc8);}

}])
//# sourceMappingURL=sourcemaps/289cf80ab63f2052.js.map